

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scenarioSmallBodyLandmarks &mdash; Basilisk 2.10.0-beta
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=b0911c87"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=3cd7d658"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. scenario_BasicOrbit" href="BskSim/scenarios/scenario_BasicOrbit.html" />
    <link rel="prev" title="scenarioSmallBodyNavUKF" href="scenarioSmallBodyNavUKF.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../index.html" class="icon icon-home">
            Basilisk
              <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Build.html">Building from Source</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#attitude-simulations">Attitude Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#constrained-spacecraft-dynamics-simulations">Constrained Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#prescribed-motion-spacecraft-dynamics-simulations">Prescribed Motion Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="scenarioSmallBodyNav.html"> Proximity Operations Hybrid EKF</a></li>
<li class="toctree-l4"><a class="reference internal" href="scenarioSmallBodyNavUKF.html"> Non-Keplerian Acceleration Estimation using UKF</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#"> Landmarks-based Navigation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#monte-carlo-simulations">Monte Carlo Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active">scenarioSmallBodyLandmarks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/scenarioSmallBodyLandmarks.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenariosmallbodylandmarks">
<span id="id1"></span><h1>scenarioSmallBodyLandmarks<a class="headerlink" href="#scenariosmallbodylandmarks" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<span id="module-scenarioSmallBodyLandmarks"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Discusses how to use the pinhole camera module to obtain landmark-based measurements around a small body.
This script sets up a 6-DOF spacecraft which is orbiting asteroid 433 Eros.</p>
<p>The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenarioSmallBodyLandmarks</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The simulation layout is shown in the following illustration.  A single simulation process is created
which contains both the spacecraft simulation, flight software and pinhole camera modules.</p>
<img alt="../_images/test_scenarioSmallBodyLandmarks.svg" class="align-center" src="../_images/test_scenarioSmallBodyLandmarks.svg" />
<p>When the simulation completes 5 plots are shown for the 3D configuration at <span class="math notranslate nohighlight">\(t_0\)</span>, the 3D configuration
at <span class="math notranslate nohighlight">\(t_f\)</span>, the landmark pixels at <span class="math notranslate nohighlight">\(t_f\)</span>, the number of visible landmarks evolution and the camera frame C axes
projection <span class="math notranslate nohighlight">\(\hat c_1\)</span>, <span class="math notranslate nohighlight">\(\hat c_2\)</span> and <span class="math notranslate nohighlight">\(\hat c_3\)</span> onto the Hill or Orbit frame axes
<span class="math notranslate nohighlight">\(\hat\imath_r\)</span>, <span class="math notranslate nohighlight">\(\hat\imath_{\theta}\)</span> and <span class="math notranslate nohighlight">\(\hat\imath_h\)</span>.</p>
<p>The basic simulation setup is very similar as the one used in <a class="reference internal" href="scenarioAttitudeGuidance.html#scenarioattitudeguidance"><span class="std std-ref">scenarioAttitudeGuidance</span></a>.
The dynamics simulation is setup using a <a class="reference internal" href="../Documentation/simulation/dynamics/spacecraft/spacecraft.html#spacecraft"><span class="std std-ref">Module: spacecraft</span></a> module to which a gravity
effector is attached. Eros gravity is setup through a <a class="reference internal" href="../Documentation/simulation/environment/planetEphemeris/planetEphemeris.html#planetephemeris"><span class="std std-ref">Module: planetEphemeris</span></a> module which simulates
Eros heliocentric motion. The flight software modules are copied from <a class="reference internal" href="scenarioAttitudeGuidance.html#scenarioattitudeguidance"><span class="std std-ref">scenarioAttitudeGuidance</span></a>
as to align the spacecraft body frame, thus also the camera frame, with the Hill frame. The goal is to
keep the camera pointing towards Eros center of mass in order to observe surface landmarks. In this
case, the attitude control flight software makes <span class="math notranslate nohighlight">\(\hat b_1\)</span> body axis to point towards the
asteroid center of mass <span class="math notranslate nohighlight">\(-\hat\imath_r\)</span> (negative radial direction ). The camera direction cosine matrix
is prescribed by the user as <span class="math notranslate nohighlight">\(\hat c_3=\hat b_1\)</span>, then it follows that attitude control is ensuring
the camera focal direction (<span class="math notranslate nohighlight">\(\hat c_3\)</span>) is pointing towards the asteroid. This way, the camera is able
to track surface landmarks.</p>
<p>The landmarks are setup based on Eros polyhedron shape. A landmark distribution is defined by surface
positions and their normals expressed in the planet rotating frame. The normal is used to check field
of view and lighting conditions from the camera and Sun respectively.</p>
<p>Since dynamics simulations can be computationally expensive, the module has a <code class="docutils literal notranslate"><span class="pre">processBatch(rBatch_CP_P,</span>
<span class="pre">mrpBatch_BP,</span> <span class="pre">eBatch_SP_P,</span> <span class="pre">show_progress)</span></code> method that is detached from the Simulation Base class. This method
requires batches (as matrices) of spacecraft position in the planet frame, spacecraft orientation in the planet
frame and Sun’s unit vector in the planet frame. The results can be accessed from the pinhole camera class
as illustrated in the subsequent script.</p>
</section>
<section id="illustration-of-simulation-results">
<h2>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useBatch</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">useBatch</span></code> flag is turned off by default but it showcases how the module can be executed detached from the
dynamics simulation. This is very convenient as it allows isolated experimentation with the pinholeCamera module
without the need of rerunning dynamics simulations (which can be slow if non-Keplerian gravity models are used
e.g. polyhedron). Alternatively, it allows to set up customized situations that may not be in accordance with a
dynamics simulation (e.g. manually prescribe radial pointing towards the asteroid)</p>
<p>The 3D situation is shown in these first two plots. In the first one, the attitude control has not converged
and the camera is not pointing towards the asteroid. Consequently, no landmarks are visible. In the second
one, the attitude control has aligned the camera focal direction (in blue) with the negative radial direction,
thus some landmarks are visible (in blue) on the surface. The third figure shows the visible landmark pixels
(with their labels) in the image plane.</p>
<img alt="../_images/scenarioSmallBodyLandmarks1.svg" class="align-center" src="../_images/scenarioSmallBodyLandmarks1.svg" />
<img alt="../_images/scenarioSmallBodyLandmarks2.svg" class="align-center" src="../_images/scenarioSmallBodyLandmarks2.svg" />
<img alt="../_images/scenarioSmallBodyLandmarks3.svg" class="align-center" src="../_images/scenarioSmallBodyLandmarks3.svg" />
<p>The next two plots show time evolution of the number of visible landmarks and the alignment of the camera
frame with respect to the Hill frame. Note that <span class="math notranslate nohighlight">\(\hat c_3\)</span> is aligned with the negative radial direction
of the Hill frame as expected.</p>
<img alt="../_images/scenarioSmallBodyLandmarks4.svg" class="align-center" src="../_images/scenarioSmallBodyLandmarks4.svg" />
<img alt="../_images/scenarioSmallBodyLandmarks5.svg" class="align-center" src="../_images/scenarioSmallBodyLandmarks5.svg" />
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.landmark_distribution">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">landmark_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vert_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">face_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_vert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_face</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_lmk</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#landmark_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.landmark_distribution" title="Link to this definition"></a></dt>
<dd><p>Creates a landmark distribution based on a polyhedron shape.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.plot_3D">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">plot_3D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xyz_vert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_face</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posLmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isvisibleLmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcm_CP</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#plot_3D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.plot_3D" title="Link to this definition"></a></dt>
<dd><p>Plot the 3D situation of asteroid, landmarks, spacecraft and camera frame.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.plot_nLmk">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">plot_nLmk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nvisibleLmk</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#plot_nLmk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.plot_nLmk" title="Link to this definition"></a></dt>
<dd><p>Plot visible landmarks evolution.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.plot_orientation">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">plot_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcm_HP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcm_CP</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#plot_orientation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.plot_orientation" title="Link to this definition"></a></dt>
<dd><p>Plot the camera frame orientation with respect to Hill frame.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.plot_pixel">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">plot_pixel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pixelLmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statusLmk</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#plot_pixel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.plot_pixel" title="Link to this definition"></a></dt>
<dd><p>Plot landmarks labeled pixels in the camera image.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioSmallBodyLandmarks.run">
<span class="sig-prename descclassname"><span class="pre">scenarioSmallBodyLandmarks.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useBatch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioSmallBodyLandmarks.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioSmallBodyLandmarks.run" title="Link to this definition"></a></dt>
<dd><p>The scenarios can be run with the followings setups parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_plots</strong> (<em>bool</em>) – Determines if the script should display plots</p></li>
<li><p><strong>useBatch</strong> (<em>bool</em>) – Specify if the pinhole camera model batch process is to be checked.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scenarioSmallBodyNavUKF.html" class="btn btn-neutral float-left" title="scenarioSmallBodyNavUKF" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="BskSim/scenarios/scenario_BasicOrbit.html" class="btn btn-neutral float-right" title="1. scenario_BasicOrbit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>