

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8. scenario_AddRWFault &mdash; Basilisk 2.8.41
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=53003e83"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="9. scenario_LambertGuidance" href="scenario_LambertGuidance.html" />
    <link rel="prev" title="7. scenario_AttModes" href="scenario_AttModes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Build.html">Building from Source</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#attitude-simulations">Attitude Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#constrained-spacecraft-dynamics-simulations">Constrained Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#prescribed-motion-spacecraft-dynamics-simulations">Prescribed Motion Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#single-satellite">Single Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#satellite-formation">Satellite Formation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#monte-carlo-simulations">Monte Carlo Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active"><span class="section-number">8. </span>scenario_AddRWFault</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/examples/BskSim/scenarios/scenario_AddRWFault.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenario-addrwfault">
<span id="id1"></span><h1><span class="section-number">8. </span>scenario_AddRWFault<a class="headerlink" href="#scenario-addrwfault" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<span id="module-scenario_AddRWFault"></span><h2><span class="section-number">8.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This script demonstrates how to use event handlers to add reaction wheel faults. The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples/BskSim/scenarios</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenario_AddRWFault</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section id="using-event-handlers">
<h2><span class="section-number">8.2. </span>Using event handlers<a class="headerlink" href="#using-event-handlers" title="Link to this heading"></a></h2>
<p>The event handler class, defined in <code class="docutils literal notranslate"><span class="pre">SimulationBaseClass</span></code>, allows the user to define events. These events can be used for a variety of reasons, ranging from changing flight modes to creating faults. The events used in this example are defined in <code class="docutils literal notranslate"><span class="pre">BSK_Dynamics</span></code>.</p>
<p>When creating an event handler, the following syntax is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SimBase</span><span class="o">.</span><span class="n">createNewEvent</span><span class="p">(</span><span class="s2">&quot;eventName&quot;</span><span class="p">,</span> <span class="n">eventRate</span><span class="p">,</span> <span class="n">eventActive</span><span class="p">,</span>
    <span class="n">conditionFunction</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="n">actionFunction</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Within the condition list should be the conditions for executing the event, specified as strings. Likewise, the action list enumerates strings that are executed when the event happens. Because the code parses these strings, rather than having complex conditions or actions in the string literals, it can be convenient to create methods (see the examples below).</p>
<p>By default, after the event has happened once, the eventActive flag is turned to false. For repeated events, this behavior can be overriden by calling the function <code class="docutils literal notranslate"><span class="pre">setEventActivity</span></code>. Likewise, the eventActive flags of other events can be set using <code class="docutils literal notranslate"><span class="pre">setAllButCurrentEventActivity</span></code>. See the associated documentation for more details.</p>
</section>
<section id="setting-up-the-faults">
<h2><span class="section-number">8.3. </span>Setting up the faults<a class="headerlink" href="#setting-up-the-faults" title="Link to this heading"></a></h2>
<p>This script uses two event handlers. The first one defines an event that injects a large, one-time static friction fault:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">action_oneTimeRWFault</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">DynModels</span><span class="o">.</span><span class="n">AddRWFault</span><span class="p">(</span><span class="s2">&quot;friction&quot;</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TotalSim</span><span class="o">.</span><span class="n">CurrentNanos</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">oneTimeRWFaultFlag</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">SimBase</span><span class="o">.</span><span class="n">createNewEvent</span><span class="p">(</span>
    <span class="s2">&quot;addOneTimeRWFault&quot;</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processTasksTimeStep</span><span class="p">,</span>
    <span class="kc">True</span><span class="p">,</span>
    <span class="n">conditionFunction</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">TotalSim</span><span class="o">.</span><span class="n">CurrentNanos</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">oneTimeFaultTime</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">oneTimeRWFaultFlag</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="p">),</span>
    <span class="n">actionFunction</span><span class="o">=</span><span class="n">action_oneTimeRWFault</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For this event, the conditions are that the time for the fault has passed, and that the corresponding fault flag is active. The fault time is specified in the scenario script. The <code class="docutils literal notranslate"><span class="pre">oneTimeRWFaultFlag</span></code> and the <code class="docutils literal notranslate"><span class="pre">repeatRWFaultFlag</span></code>, also set in the scenario script, ensures that the faults are added only for the fault scenario.</p>
<p>The second event handler defines an event that is always active, and adds a smaller static friction fault with small probability:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">action_repeatedRWFault</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">DynModels</span><span class="o">.</span><span class="n">PeriodicRWFault</span><span class="p">(</span>
        <span class="mf">1.0</span> <span class="o">/</span> <span class="mi">3000</span><span class="p">,</span> <span class="s2">&quot;friction&quot;</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TotalSim</span><span class="o">.</span><span class="n">CurrentNanos</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setEventActivity</span><span class="p">(</span><span class="s2">&quot;addRepeatedRWFault&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">SimBase</span><span class="o">.</span><span class="n">createNewEvent</span><span class="p">(</span>
    <span class="s2">&quot;addRepeatedRWFault&quot;</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processTasksTimeStep</span><span class="p">,</span>
    <span class="kc">True</span><span class="p">,</span>
    <span class="n">conditionFunction</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">repeatRWFaultFlag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">actionFunction</span><span class="o">=</span><span class="n">action_repeatedRWFault</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note the command <code class="docutils literal notranslate"><span class="pre">&quot;self.setEventActivity('addRepeatedRWFault',True)&quot;</span></code>, keeping the eventActive flag turned on for this event handler. For both event handlers, the particular methods that change the reaction wheel friction parameters are defined in <code class="docutils literal notranslate"><span class="pre">BSK_Dynamics</span></code>.</p>
</section>
<section id="illustration-of-simulation-results">
<h2><span class="section-number">8.4. </span>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">showPlots</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<img alt="../../../_images/scenario_AddRWFault_rateError.svg" class="align-center" src="../../../_images/scenario_AddRWFault_rateError.svg" />
<img alt="../../../_images/scenario_AddRWFault_attitudeErrorNorm.svg" class="align-center" src="../../../_images/scenario_AddRWFault_attitudeErrorNorm.svg" />
<img alt="../../../_images/scenario_AddRWFault_RWSpeeds.svg" class="align-center" src="../../../_images/scenario_AddRWFault_RWSpeeds.svg" />
<img alt="../../../_images/scenario_AddRWFault_RWFriction.svg" class="align-center" src="../../../_images/scenario_AddRWFault_RWFriction.svg" />
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenario_AddRWFault.run">
<span class="sig-prename descclassname"><span class="pre">scenario_AddRWFault.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.run" title="Link to this definition"></a></dt>
<dd><p>The scenarios can be run with the following parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>showPlots</strong> (<em>bool</em>) – Determines if the script should display plots</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenario_AddRWFault.runScenario">
<span class="sig-prename descclassname"><span class="pre">scenario_AddRWFault.</span></span><span class="sig-name descname"><span class="pre">runScenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#runScenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.runScenario" title="Link to this definition"></a></dt>
<dd><p>method to initialize and execute the scenario</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scenario_AddRWFault.scenario_AddRWFault">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scenario_AddRWFault.</span></span><span class="sig-name descname"><span class="pre">scenario_AddRWFault</span></span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#scenario_AddRWFault"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.scenario_AddRWFault" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../BSK_masters.html#BSK_masters.BSKSim" title="BSK_masters.BSKSim"><code class="xref py py-class docutils literal notranslate"><span class="pre">BSKSim</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BSKScenario</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="scenario_AddRWFault.scenario_AddRWFault.configure_initial_conditions">
<span class="sig-name descname"><span class="pre">configure_initial_conditions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#scenario_AddRWFault.configure_initial_conditions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.scenario_AddRWFault.configure_initial_conditions" title="Link to this definition"></a></dt>
<dd><p>Developer must override this method in their BSK_Scenario derived subclass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scenario_AddRWFault.scenario_AddRWFault.log_outputs">
<span class="sig-name descname"><span class="pre">log_outputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#scenario_AddRWFault.log_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.scenario_AddRWFault.log_outputs" title="Link to this definition"></a></dt>
<dd><p>Developer must override this method in their BSK_Scenario derived subclass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scenario_AddRWFault.scenario_AddRWFault.pull_outputs">
<span class="sig-name descname"><span class="pre">pull_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scenario_AddRWFault.html#scenario_AddRWFault.pull_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenario_AddRWFault.scenario_AddRWFault.pull_outputs" title="Link to this definition"></a></dt>
<dd><p>Developer must override this method in their BSK_Scenario derived subclass.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scenario_AttModes.html" class="btn btn-neutral float-left" title="7. scenario_AttModes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scenario_LambertGuidance.html" class="btn btn-neutral float-right" title="9. scenario_LambertGuidance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>