

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enabling Branching of Basilisk Effectors &mdash; Basilisk 2.9.0
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=182a64a0"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Support" href="../../../Support.html" />
    <link rel="prev" title="Multi-body Dynamics with MuJoCo" href="mujocoDynObject.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Build.html">Building from Source</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/index.html">Integrated Example Scripts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../makingModules.html">Basics of Writing Basilisk Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../makingModules-1.html">Module Design Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makingModules-2.html">Creating New Message Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cModules.html">Making C Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cppModules.html">Making C++ Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyModules.html">Making Python Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makingModules-3.html">Module RST Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makingModules-4.html">Module Unit Test File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makingDraftModule.html">Automation Script to Create a New Basilisk Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makingModules-5.html">Common Basilisk Support Files</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../advancedTopics.html">Advanced Topics</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="creatingDynObject.html">Creating <code class="docutils literal notranslate"><span class="pre">DynamicObject</span></code> Basilisk Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="mujocoDynObject.html">Multi-body Dynamics with MuJoCo</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Enabling Branching of Basilisk Effectors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="../../makingModules.html">Basics of Writing Basilisk Modules</a></li>
          <li class="breadcrumb-item"><a href="../advancedTopics.html">Advanced Topics</a></li>
      <li class="breadcrumb-item active">Enabling Branching of Basilisk Effectors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/Learn/makingModules/advancedTopics/effectorBranching.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="enabling-branching-of-basilisk-effectors">
<span id="effectorbranching"></span><h1>Enabling Branching of Basilisk Effectors<a class="headerlink" href="#enabling-branching-of-basilisk-effectors" title="Link to this heading"></a></h1>
<p>Back-substitution is the default method that manages the dynamics under the hood of Basilisk. The
backsubstitution formulation assumes that all dynamical modules, a.k.a. “effectors”, influencing the
dynamics of the spacecraft are attached directly to its central hub in parallel. These effectors are
sub-classed as either <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/dynamicEffector.html#dynamiceffector"><span class="std std-ref">Module: dynamicEffector</span></a> (provide external forces and torques acting on the
body, but doesn’t have state differential equations to integrate) or <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/stateEffector.html#stateeffector"><span class="std std-ref">Module: stateEffector</span></a> (has
internal state differential equations to integrate that couple with the spacecraft rigid hub).</p>
<p>This parallel coupling assumption can be relaxed to allow select configurations of effectors to be
attached in series to each other as opposed to being attached directly to the hub. See
<a class="reference internal" href="../../bskPrinciples/bskPrinciples-11.html#bskprinciples-11"><span class="std std-ref">Advanced: Effector Module Branching</span></a> for a description on using this added functionality.</p>
<section id="state-effector-augmentation">
<h2>State Effector Augmentation<a class="headerlink" href="#state-effector-augmentation" title="Link to this heading"></a></h2>
<p>For a state effector, three changes must be made.</p>
<ol class="arabic">
<li><p>Connect the state effector’s properties to the <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/dynParamManager.html#dynparammanager"><span class="std std-ref">Module: dynParamManager</span></a></p>
<blockquote>
<div><ul class="simple">
<li><p>Ensure the effector’s inertial properties are of an appropriate data type to be accepted by
the parameter manager (ex. pointer to <code class="docutils literal notranslate"><span class="pre">Eigen::MatrixXd</span></code>). These properties should already be
computed at each timestep by a method named something like
<code class="docutils literal notranslate"><span class="pre">compute&lt;EffectorName&gt;InertialStates()</span></code></p></li>
<li><p>Define names for these inertial properties to be registered with in the parameter manager</p></li>
<li><p>Define an <code class="docutils literal notranslate"><span class="pre">assignStateParamNames()</span></code> method to hand these property names to the dependent
effector</p></li>
<li><p>Override the <code class="docutils literal notranslate"><span class="pre">registerProperties()</span></code> method of the state effector base class, and inside it
register the properties and call the corresponding <code class="docutils literal notranslate"><span class="pre">linkInProperties()</span></code> method of dependent
effectors</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Add a way to attach dynamic effectors to the state effector</p>
<blockquote>
<div><ul class="simple">
<li><p>Add a variable to the effector’s class to store a list of its dependent effectors</p></li>
<li><p>Override the <code class="docutils literal notranslate"><span class="pre">addDynamicEffector()</span></code> method of the state effector base class, and inside it
call <code class="docutils literal notranslate"><span class="pre">assignStateParamNames()</span></code> on the new dependent effector, and add it to the list</p></li>
</ul>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>Augment the equations of motion to apply forces and torques of dependent effectors</dt><dd><ul class="simple">
<li><p>Inside of <code class="docutils literal notranslate"><span class="pre">updateContributions()</span></code>, loop over the list of dependent effectors, calling their
<code class="docutils literal notranslate"><span class="pre">computeForceTorque()</span></code> methods, and collecting <code class="docutils literal notranslate"><span class="pre">forceExternal_B</span></code> and
<code class="docutils literal notranslate"><span class="pre">torqueExternalPntB_B</span></code></p></li>
<li><p>Insert this force and torque into the effector equation of motion, ensuring to transform it
into the appropriate frame</p></li>
<li><p>Insert the force and torque into the vecTrans and vecRot contributions, ensuring to transform
it into the appropriate frame</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
</section>
<section id="dynamic-effector-augmentation">
<h2>Dynamic Effector Augmentation<a class="headerlink" href="#dynamic-effector-augmentation" title="Link to this heading"></a></h2>
<p>For a dynamic effector, three changes must also be made.</p>
<ol class="arabic">
<li><p>Connect the dynamic effector to its parents properties</p>
<blockquote>
<div><ul class="simple">
<li><p>Override the <code class="docutils literal notranslate"><span class="pre">linkInProperties()</span></code> method of the base class, and inside it collect the
relevant properties from the parameter manager. Different effectors require various
combinations of position, velocity, attitude, and angular velocity of their parent, including
requiring none.</p></li>
<li><p>In places where hub states are used, add a conditional to use effector properties instead if
the parent is a state effector instead of the hub.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>If the dynamic effector has a setup factory, such as the thruster’s <a class="reference internal" href="../../../Documentation/utilities/simIncludeThruster.html#simincludethruster"><span class="std std-ref">simIncludeThruster</span></a> or
the reaction wheel’s <a class="reference internal" href="../../../Documentation/utilities/simIncludeRW.html#simincluderw"><span class="std std-ref">simIncludeRW</span></a>, define a method there for adding to a state effector
instead of the hub.</p></li>
<li><p>Set dynamic effector base class variable <code class="docutils literal notranslate"><span class="pre">isAttachableToStateEffector</span></code> to True in the
constructor.</p></li>
</ol>
</section>
<section id="additional-resources">
<h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Link to this heading"></a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The force and torque ouput by dependent effectors as variables forceExternal_B and
<code class="docutils literal notranslate"><span class="pre">torqueExternalPntB_B</span></code> is computed relative to its parent frame, not the body frame as they
are labeled. For example if attached to a <a class="reference internal" href="../../../Documentation/simulation/dynamics/spinningBodies/spinningBodiesOneDOF/spinningBodyOneDOFStateEffector.html#spinningbodyonedofstateeffector"><span class="std std-ref">Module: spinningBodyOneDOFStateEffector</span></a>,
<code class="docutils literal notranslate"><span class="pre">torqueExternalPntB_B</span></code> is actually the torque about point S expressed in the S frame
(<code class="docutils literal notranslate"><span class="pre">torqueExternalPntS_S</span></code>) as its parent frame is the spinning body’s frame.</p>
<p>This also requires that the state effector output inertial properties to this frame origin
(<code class="docutils literal notranslate"><span class="pre">r_SN_N</span></code>) as opposed to outputting inertial properties to its center of mass (<code class="docutils literal notranslate"><span class="pre">r_ScN_N</span></code>).
This is important because dynamic effectors handle converting their applied forces to torques
with respect to their parent frame origin. If the state effector passes it’s center of mass
position, this torque computed by the attached dynamic effector would need to be corrected, but
the state effector does not get knowledge of where dynamic effectors are attached to make such a
correction.</p>
</div>
<p>A more complete description of back-substitution, <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/stateEffector.html#stateeffector"><span class="std std-ref">Module: stateEffector</span></a>, and <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/dynamicEffector.html#dynamiceffector"><span class="std std-ref">Module: dynamicEffector</span></a>
can be found in <a class="reference internal" href="../../../Documentation/simulation/dynamics/spacecraft/spacecraft.html#spacecraft"><span class="std std-ref">Module: spacecraft</span></a> and its linked PDF description, particularly the Equations of
Motion section. Specifics on setting up the corresponding integrated tests for any newly enabled
branching effectors can be found in <a class="reference internal" href="../../../Documentation/simulation/dynamics/_GeneralModuleFiles/_UnitTestDynamics/test_effectorBranching_integrated.html#test-effectorbranching-integrated"><span class="std std-ref">test_effectorBranching_integrated</span></a>. A more detailed
description of this augmentation of the back-substitution method can be found in the following
conference paper.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A. Morell and H. Schaub, <a class="reference external" href="https://hanspeterschaub.info/Papers/Morell2025.pdf">““Expanded Back-Substitution Dynamics Modeling For Branched Force And
Torque Based Spacecraft Components”</a>,
AAS Spaceflight Mechanics Meeting, Kauai, HI, Jan. 19-23, 2025</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mujocoDynObject.html" class="btn btn-neutral float-left" title="Multi-body Dynamics with MuJoCo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../../Support.html" class="btn btn-neutral float-right" title="Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>