

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Migrating Basilisk Modules from Version 1.X to 2.X &mdash; Basilisk 2.10.0-beta
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=b0911c87"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Migrating BSK Scripts to Python 3" href="MigratingToPython3.html" />
    <link rel="prev" title="Basilisk Architecture Support Documentation" href="UnderstandingBasilisk.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Build.html">Building from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Learn.html">Learning Basilisk</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Support.html">Support</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bskReleaseNotes.html">Basilisk Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bskKnownIssues.html">Basilisk Known Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../User.html">User Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../Developer.html">Developer Information</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="CodingGuidlines.html">Coding Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="Debugging.html">Accessing the Debugger for C/C++ Basilisk Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecatingCode.html">Deprecating code in Basilisk</a></li>
<li class="toctree-l3"><a class="reference internal" href="makingNewBskModule.html">Making a New C/C++ Basilisk Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="addSphinxDoc.html">Using Sphinx to Document Basilisk Modules and Folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="createHtmlDocumentation.html">Creating the HTML Basilisk Documentation using Sphinx/Doxygen</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskModuleCheckoutList.html">Basilisk Module Checkout List</a></li>
<li class="toctree-l3"><a class="reference internal" href="UnderstandingBasilisk.html">Basilisk Architecture Support Documentation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Migrating Basilisk Modules from Version 1.X to 2.X</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-names">Message Names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-new-message-definitions">Creating New Message Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-by-step-guide-to-upgrade-a-basilisk-modules">Step-By-Step Guide to Upgrade a Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="MigratingToPython3.html">Migrating BSK Scripts to Python 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="addSupportData.html">Adding Support Data Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="releaseGuide.html">Release Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Support.html">Support</a></li>
          <li class="breadcrumb-item"><a href="../Developer.html">Developer Information</a></li>
      <li class="breadcrumb-item active">Migrating Basilisk Modules from Version 1.X to 2.X</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Support/Developer/migratingBskModuleToBsk2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="migrating-basilisk-modules-from-version-1-x-to-2-x">
<span id="migratingmoduletobsk2"></span><h1>Migrating Basilisk Modules from Version 1.X to 2.X<a class="headerlink" href="#migrating-basilisk-modules-from-version-1-x-to-2-x" title="Link to this heading"></a></h1>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading"></a></h2>
<p>This document discusses what coding related changes occurred with the new messaging
system in Basilisk version 2.0
and higher.  However, nothing is for free.  Making these changes was not possible without breaking existing code.
This migration
help page outlines all the Basilisk coding related changes that have occurred.
This facilities the process of upgrading legacy
Basilisk C and C++ code to function with the new message system, etc.</p>
<p>For changes related to updating Basilisk python scripts, see <a class="reference internal" href="../User/migratingToBsk2.html#migratingtobsk2"><span class="std std-ref">Migrating Basilisk Scripts from Version 1.X to 2.X</span></a>.</p>
</section>
<section id="message-names">
<h2>Message Names<a class="headerlink" href="#message-names" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="../User/migratingToBsk2.html#migratingtobsk2"><span class="std std-ref">Migrating Basilisk Scripts from Version 1.X to 2.X</span></a> for the discussion on how module input and output messages no longer
have name and ID variables.</p>
</section>
<section id="creating-new-message-definitions">
<h2>Creating New Message Definitions<a class="headerlink" href="#creating-new-message-definitions" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="CodingGuidlines.html#bsk2messagedefinition"><span class="std std-ref">Message Definitions</span></a> for how new message C structures can be created and added to the
Basilisk project.</p>
</section>
<section id="step-by-step-guide-to-upgrade-a-basilisk-modules">
<h2>Step-By-Step Guide to Upgrade a Basilisk Modules<a class="headerlink" href="#step-by-step-guide-to-upgrade-a-basilisk-modules" title="Link to this heading"></a></h2>
<p>All the existing BSK 1.x messaging functionality exists with the new BSK 2.0 messaging system.
This facilitates the migration to 2.0 as it requires some commands to be changed, but
none of the code logic should have to change.  As before, the message interfaces vary between
C and C++ modules.</p>
<section id="changed-importing-of-some-files">
<h3>Changed Importing of Some Files<a class="headerlink" href="#changed-importing-of-some-files" title="Link to this heading"></a></h3>
<p>If your module uses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;simulation/simFswInterfaceMessages/macroDefinitions.h&quot;</span>
</pre></div>
</div>
<p>this file has now moved to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;architecture/utilities/macroDefinitions.h&quot;</span>
</pre></div>
</div>
<p>Further, all includes should be done relative to the <code class="docutils literal notranslate"><span class="pre">Basilisk/src</span></code> directory.  This means:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;sensors/magnetometer/magnetometer.h&quot;</span>
</pre></div>
</div>
<p>should be changed to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;simulation/sensors/magnetometer/magnetometer.h&quot;</span>
</pre></div>
</div>
</section>
<section id="updating-a-c-module">
<h3>Updating a C Module<a class="headerlink" href="#updating-a-c-module" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.h</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>Remove the import of the C interface to the old messaging system, delete this line</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;messaging/static_messaging.h&quot;</span>
</pre></div>
</div>
<p>The message wrappers being included below replace this step.</p>
</li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">#include</span></code> statement to read in the message definition through</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cMsgCInterface/ModuleMsg_C.h&quot;</span>
</pre></div>
</div>
<p>This import provides access to the message object as well as the C message structure definition.</p>
</li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">char</span></code> message name variable <code class="docutils literal notranslate"><span class="pre">moduleOutMsgName</span></code> and associated
<code class="docutils literal notranslate"><span class="pre">int_32t</span></code> message ID variable <code class="docutils literal notranslate"><span class="pre">moduleOutMsgId</span></code> with</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleMsg_C</span><span class="w"> </span><span class="n">moduleOutMsg</span><span class="p">;</span><span class="w">    </span><span class="c1">// sensor output message</span>
<span class="n">ModuleMsg_C</span><span class="w"> </span><span class="n">moduleInMsg</span><span class="p">;</span><span class="w">     </span><span class="c1">// sensor input message</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">Fsw</span></code>, <code class="docutils literal notranslate"><span class="pre">Int</span></code> and <code class="docutils literal notranslate"><span class="pre">Sim</span></code> message distinctions are now dropped in the new
messaging system.  This step is the same regardless if this message connects to/from a C or
C++ Basilisk module.</p>
</li>
<li><p>If you want to create an array of output messages, this can be done with</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SomeMsg_C</span><span class="w"> </span><span class="n">descriptionOutMsgs</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
</pre></div>
</div>
</li>
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">CrossInit_xxxx()</span></code> method, it is no longer used.  If you initialized any code in this function, move that code to the module <code class="docutils literal notranslate"><span class="pre">Reset_xxxx()</span></code> function.</p></li>
<li><p>Clean up the <code class="docutils literal notranslate"><span class="pre">SelfInit_xxxx()</span></code> method to only initialize the output messages.  All other code and setup should be moved to the <code class="docutils literal notranslate"><span class="pre">Reset_xxxx()</span></code> function.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.c</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>To initialize the module output message in <code class="docutils literal notranslate"><span class="pre">SelfInit_xxxx()</span></code>, replace</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsgId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateNewMessage</span><span class="p">(</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsgName</span><span class="p">,</span>
<span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswOutMsg</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;ModuleFswOutMsg&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleMsg_C_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsg</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>To check if an output message has been linked to other input message, use</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleMsg_C_isLinked</span><span class="p">(</span><span class="o">&amp;</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsg</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>To connect to an input message, delete</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleInMsgId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subscribeToMessage</span><span class="p">(</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleInMsgName</span><span class="p">,</span>
<span class="w">                                        </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswMsg</span><span class="p">),</span><span class="w"> </span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>The input messages are connected when then Basilisk simulation is scripted in python.  No
additional code is required in your C code.  Remove the <code class="docutils literal notranslate"><span class="pre">CrossInit_xxxx()</span></code> method,
it is no longer used.  If you initialized any code in this function, move that code
to the module <code class="docutils literal notranslate"><span class="pre">Reset_xxxx()</span></code> function.</p>
</li>
<li><p>To create a local variable of the message content structure (payload) itself, use</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleMsgPayload</span><span class="w"> </span><span class="n">msgBuffer</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>To read in a message, replace</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleFswMsg</span><span class="w"> </span><span class="n">msgBuffer</span><span class="p">;</span>
<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msgBuffer</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswMsg</span><span class="p">));</span>
<span class="n">ReadMessage</span><span class="p">(</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleInMsgId</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timeOfMsgWritten</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sizeOfMsgWritten</span><span class="p">,</span>
<span class="w">            </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswMsg</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">sc</span><span class="p">),</span><span class="w"> </span><span class="n">msgBuffer</span><span class="p">);</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ModuleMsgPayload</span><span class="w"> </span><span class="n">msgBuffer</span><span class="p">;</span>
<span class="n">msgBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ModuleMsg_C_read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleInMsg</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To check is a message has been connected to, check the value of <code class="docutils literal notranslate"><span class="pre">ModuleMsg_C_isLinked()</span></code></p></li>
<li><p>To check if a message has ever been written to, check the value of <code class="docutils literal notranslate"><span class="pre">ModuleMsg_C_isWritten()</span></code></p></li>
<li><p>To get the time when a message was written, use <code class="docutils literal notranslate"><span class="pre">ModuleMsg_C_timeWritten()</span></code></p></li>
<li><p>To get the ID of the module who wrote the message, use <code class="docutils literal notranslate"><span class="pre">ModuleMsg_C_moduleID()</span></code></p></li>
</ul>
</li>
<li><p>To zero a message payload variable <code class="docutils literal notranslate"><span class="pre">someMsgBuffer</span></code> of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>,
while enjoying strong type checking, you can remove the use of <code class="docutils literal notranslate"><span class="pre">memset()</span></code> and use instead</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SomeMsgPayload</span><span class="w"> </span><span class="n">someMsgBuffer</span><span class="p">;</span>
<span class="n">someMsgBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SomeMsg_C_zeroMsgPayload</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>To write to an output message, assuming <code class="docutils literal notranslate"><span class="pre">outputMsgBuffer</span></code> is a local variable holding
the message content (payload), replace</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">outputMsgBuffer</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswMsg</span><span class="p">));</span>
<span class="n">outputMsgBuffer</span><span class="p">.</span><span class="n">variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">     </span><span class="c1">// specify output msg values</span>
<span class="n">WriteMessage</span><span class="p">(</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsgId</span><span class="p">,</span><span class="w"> </span><span class="n">callTime</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleIntMsg</span><span class="p">),</span>
<span class="w">        </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">outputMsgBuffer</span><span class="p">),</span><span class="w"> </span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">outputMsgBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ModuleMsg_C_zeroMsgPayload</span><span class="p">();</span>
<span class="n">outputMsgBuffer</span><span class="p">.</span><span class="n">variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">      </span><span class="c1">// specify output msg values</span>
<span class="n">ModuleMsg_C_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">outputMsgBuffer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">configData</span><span class="o">-&gt;</span><span class="n">moduleOutMsg</span><span class="p">,</span><span class="w"> </span><span class="n">moduleID</span><span class="p">,</span><span class="w"> </span><span class="n">callTime</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that you should still zero the local <code class="docutils literal notranslate"><span class="pre">outputMsgBuffer</span></code> structure in C Modules such that the message
has zero default values if some fields are note set.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.i</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">GEN_SIZEOF()</span></code> commands used to be used to get the size of a message in Python.  This is no longer
required with the new message system.  Thus, these <code class="docutils literal notranslate"><span class="pre">GEN_SIZEOF()</span></code> commands can be removed.  To create and access
messages from Python the <code class="docutils literal notranslate"><span class="pre">message2</span></code> package is now used.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">#include</span></code> statement and add the <code class="docutils literal notranslate"><span class="pre">struct</span></code> statement to read</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">include</span><span class="w"> </span><span class="s">&quot;architecture/msgPayloadDefC/ModuleMsgPayload.h&quot;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">ModuleMsg_C</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>Any custom Swig’d interfaces to access message content, such as</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ARRAYASLIST</span><span class="p">(</span><span class="n">FSWdeviceAvailability</span><span class="p">)</span>
</pre></div>
</div>
<p>should be removed from the <code class="docutils literal notranslate"><span class="pre">module.i</span></code> file and moved to <code class="docutils literal notranslate"><span class="pre">src/architecture/messaging/messaging.i</span></code>
file instead.  These interfaces can now be used by any module by importing <code class="docutils literal notranslate"><span class="pre">messages2</span></code> in the
Basilisk python script.</p>
</li>
<li><p>If you want to create an array of output messages <code class="docutils literal notranslate"><span class="pre">SomeMsg_C</span></code>, the array of messages must be swig’d to be
accessible from python.  In the module <code class="docutils literal notranslate"><span class="pre">*.i</span></code> file, add this statement</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">STRUCTASLIST</span><span class="p">(</span><span class="n">SomeMsg_C</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The location of <code class="docutils literal notranslate"><span class="pre">swig_common_model</span></code> has moved to <code class="docutils literal notranslate"><span class="pre">architecture</span></code>.  Thus, replace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.simulation.swig_common_model</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.architecture.swig_common_model</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.rst</span></code> documentation file:</p>
<blockquote>
<div><ul class="simple">
<li><p>In the table of module messages, update any message variable names that were changed
as well as the message definition from <code class="docutils literal notranslate"><span class="pre">SomeFswMsgPayload</span></code> to <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>.</p></li>
<li><p>If applicable, update the module msg I/O illustration</p></li>
</ul>
</div></blockquote>
</li>
</ol>
</section>
<section id="id1">
<h3>Updating a C++ Module<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.h</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">#include</span></code> statement to read in a C message definition through</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;architecture/msgPayloadDefC/SomeMsgPayload.h&quot;</span>
</pre></div>
</div>
<p>To include a C++ message definition use</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;architecture/msgPayloadDefCpp/SomeMsgPayload.h&quot;</span>
</pre></div>
</div>
</li>
<li><p>Replace the include statement for the old message system</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;architecture/messaging/system_messaging.h&quot;</span>
</pre></div>
</div>
<p>with the include for the new message system</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;architecture/messaging/messaging.h&quot;</span>
</pre></div>
</div>
</li>
<li><p>Remove both the <code class="docutils literal notranslate"><span class="pre">SelfInit()</span></code> and <code class="docutils literal notranslate"><span class="pre">CrossInit()</span></code> methods, they are longer used.  If you initialized any code in these functions, move that code to the module <code class="docutils literal notranslate"><span class="pre">Reset()</span></code> method.</p></li>
<li><p>For output messages, replace the <code class="docutils literal notranslate"><span class="pre">std::string</span></code> message name variable
<code class="docutils literal notranslate"><span class="pre">moduleOutMsgName</span></code> and associated
<code class="docutils literal notranslate"><span class="pre">int_32t</span></code> message ID variable <code class="docutils literal notranslate"><span class="pre">moduleOutMsgId</span></code> with the <code class="docutils literal notranslate"><span class="pre">public</span></code> variable:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Message</span><span class="o">&lt;</span><span class="n">OutputMsgPayload</span><span class="o">&gt;</span><span class="w">  </span><span class="n">moduleOutMsg</span><span class="p">;</span><span class="w">    </span><span class="c1">//!&lt; sensor output message</span>
</pre></div>
</div>
<p>This creates an instance of the output message object that is contained within this module.</p>
</li>
<li><p>For input messages, replace the <code class="docutils literal notranslate"><span class="pre">std::string</span></code> message name variable
<code class="docutils literal notranslate"><span class="pre">moduleInMsgName</span></code> and associated
<code class="docutils literal notranslate"><span class="pre">int_32t</span></code> message ID variable <code class="docutils literal notranslate"><span class="pre">moduleInMsgId</span></code> with the <code class="docutils literal notranslate"><span class="pre">public</span></code> functor:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ReadFunctor</span><span class="o">&lt;</span><span class="n">InputMsgPayload</span><span class="o">&gt;</span><span class="w">   </span><span class="n">moduleInMsg</span><span class="p">;</span><span class="w">     </span><span class="c1">//!&lt; sensor input message</span>
</pre></div>
</div>
</li>
<li><p>It is possible to create a vector of output message pointers of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code> using</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&lt;</span><span class="n">SomeMsgPayload</span><span class="o">&gt;*&gt;</span><span class="w"> </span><span class="n">descriptionOutMsgs</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>Similarly, you can create a vector of input message reader objects of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>
using the following statement.  Note that you can directly create message reader instances,
and not pointers to such objects as with a vector of output messages.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ReadFunctor</span><span class="o">&lt;</span><span class="n">SomeMsgPayload</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">descriptionInMsgs</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.cpp</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>There is no need for additional code to create an output connector.  Thus, delete old message
creation code such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleOutMsgId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SystemMessaging</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateNewMessage</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleOutMsgName</span><span class="p">,</span>
<span class="w">                                                                    </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleSimMsg</span><span class="p">),</span>
<span class="w">                                                                    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">numOutMsgBuffers</span><span class="p">,</span>
<span class="w">                                                                    </span><span class="s">&quot;ModuleSimMsg&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>The new message object is automatically created through the above process in the <code class="docutils literal notranslate"><span class="pre">module.h</span></code> file.
In fact, deleted the <code class="docutils literal notranslate"><span class="pre">SelfInit()</span></code> method as it is no longer needed with C++ modules.  The output
message object automatically connect to themselves in their constructors.  Any other code in
the <code class="docutils literal notranslate"><span class="pre">SelfInit()</span></code> method should be moved to the <code class="docutils literal notranslate"><span class="pre">Reset()</span></code> method.</p>
</li>
<li><p>If a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> of output message pointers of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code> was created in the module <code class="docutils literal notranslate"><span class="pre">*.h</span></code> file
then these message objects must be created dynamically in the <code class="docutils literal notranslate"><span class="pre">*.cpp</span></code> code using</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Message</span><span class="o">&lt;</span><span class="n">SomeMsgPayload</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">;</span>
<span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Message</span><span class="o">&lt;</span><span class="n">SomeMsgPayload</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">this</span><span class="o">-&gt;</span><span class="n">descriptionOutMsgs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
</pre></div>
</div>
<p>Don’t forget to delete these message allocation in the module deconstructor.</p>
</li>
<li><p>If you have a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> of input message objects, these are typically provided
to the BSK module in Python through
a support function.  For example, consider the case where the module has a vector of planet state input messages
that can be configured.  The method <code class="docutils literal notranslate"><span class="pre">addPlanet()</span></code> then receives the message object pointer as shown below.
Next, the vector <code class="docutils literal notranslate"><span class="pre">planetInMsgs</span></code> must have a reader to the provided message object added.  The message
method <code class="docutils literal notranslate"><span class="pre">.addSubscriber()</span></code> returns a reader object, essentially an input message linked to this output
message.  The code below assumes the module also has a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> of the planet state payload structure
to act as the input buffer variables.  This <code class="docutils literal notranslate"><span class="pre">addPlanet</span></code> routine below creates such buffer variables and adds
them to the <code class="docutils literal notranslate"><span class="pre">planetMsgData</span></code> vector each time a planet is added.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">BskModuleName::addPlanet</span><span class="p">(</span><span class="n">Message</span><span class="o">&lt;</span><span class="n">SpicePlanetStateMsgPayload</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">planetSpiceMsg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* add a message reader to the vector of input messages */</span>
<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">planetInMsgs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">planetSpiceMsg</span><span class="o">-&gt;</span><span class="n">addSubscriber</span><span class="p">());</span>

<span class="w">    </span><span class="cm">/* expand the planet state input buffer vector */</span>
<span class="w">    </span><span class="n">SpicePlanetStateMsgPayload</span><span class="w"> </span><span class="n">plMsg</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">planetMsgData</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">plMsg</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>To check is an output message has been connected to, check the value of <code class="docutils literal notranslate"><span class="pre">this-&gt;moduleOutMsg.isLinked()</span></code></p></li>
<li><p>To subscribe to an input message, this is now accomplished in the Basilisk Python script
where the message to module connections are setup now.  Thus, delete code such as this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleInMsgID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SystemMessaging</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">subscribeToMessage</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleInMsgName</span><span class="p">,</span>
<span class="w">                                                                       </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ModuleFswMsg</span><span class="p">),</span><span class="w"> </span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>Remove the <code class="docutils literal notranslate"><span class="pre">CrossInit()</span></code> method, it is longer used.  If you initialized any code in this method,
move that code to the module <code class="docutils literal notranslate"><span class="pre">Reset()</span></code> method.</p>
</li>
<li><p>To read an input message, replace old code such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">InputFswMsg</span><span class="w"> </span><span class="n">moduleInMsgBuffer</span><span class="p">;</span>
<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">moduleInMsgBuffer</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">InputFswMsg</span><span class="p">));</span>
<span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleInMsg</span><span class="w"> </span><span class="o">=</span>
<span class="w">   </span><span class="n">SystemMessaging</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ReadMessage</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleInMsgID</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">LocalHeader</span><span class="p">,</span>
<span class="w">                                            </span><span class="k">sizeof</span><span class="p">(</span><span class="n">InputFswMsg</span><span class="p">),</span>
<span class="w">                                            </span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">moduleInMsgBuffer</span><span class="p">)),</span>
<span class="w">                                            </span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>with this new code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">InputMsgPayload</span><span class="w"> </span><span class="n">moduleInMsgBuffer</span><span class="p">;</span>
<span class="n">moduleInMsgBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleInMsg</span><span class="p">();</span>
</pre></div>
</div>
<p>Take a moment to marvel at the simplicity of this message reading!</p>
<ul class="simple">
<li><p>To check is an input message has been connected to, check the value of <code class="docutils literal notranslate"><span class="pre">this-&gt;moduleInMsg.isLinked()</span></code></p></li>
<li><p>To check if a message has ever been written to, check the value of <code class="docutils literal notranslate"><span class="pre">this-&gt;moduleInMsg.isWritten()</span></code></p></li>
<li><p>To get the time when a message was written, use <code class="docutils literal notranslate"><span class="pre">this-&gt;moduleInMsg.timeWritten()</span></code></p></li>
<li><p>To get the ID of the module who wrote the message, use <code class="docutils literal notranslate"><span class="pre">this-&gt;moduleInMsg.moduleID()</span></code></p></li>
</ul>
</li>
<li><p>To zero a local message structure variable <code class="docutils literal notranslate"><span class="pre">someMsgBuffer</span></code> of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>, remove
the use of <code class="docutils literal notranslate"><span class="pre">memset()</span></code> and rather use the following.  If the msg buffer variable is for use
with an output message <code class="docutils literal notranslate"><span class="pre">someOutMsg</span></code>, then use</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SomeMsgPayload</span><span class="w"> </span><span class="n">someMsgBuffer</span><span class="p">;</span>
<span class="n">someMsgBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">someOutMsg</span><span class="p">.</span><span class="n">zeroMsgPayload</span><span class="p">;</span>
</pre></div>
</div>
<p>If the buffer is related to an input message <code class="docutils literal notranslate"><span class="pre">someInMsg</span></code>, the same basic syntax works.
Just replace <code class="docutils literal notranslate"><span class="pre">someOutMsg</span></code> with <code class="docutils literal notranslate"><span class="pre">someInMsg</span></code> above.  This ensures the correct message type is zero’d
and assigned to the local buffer variable.</p>
</li>
<li><p>To write to an output message, replace this old code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SystemMessaging</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">WriteMessage</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleOutMsgId</span><span class="p">,</span><span class="w"> </span><span class="n">clockTime</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">OutputSimMsg</span><span class="p">),</span>
<span class="w">                                        </span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">outMsgBuffer</span><span class="p">),</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleID</span><span class="p">);</span>
</pre></div>
</div>
<p>with this new code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleOutMsg</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">outMsgBuffer</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">moduleID</span><span class="p">,</span><span class="w"> </span><span class="n">clockTime</span><span class="p">);</span>
</pre></div>
</div>
<p>Again, stop and marvel.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.i</span></code> file:</p>
<blockquote>
<div><ul>
<li><p>The location of <code class="docutils literal notranslate"><span class="pre">swig_common_model</span></code> has moved to <code class="docutils literal notranslate"><span class="pre">architecture</span></code>.  Thus, replace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.simulation.swig_common_model</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.architecture.swig_common_model</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">GEN_SIZEOF()</span></code> commands used to be used to get the size of a message in Python.  This is no longer
required with the new message system.  Thus, these <code class="docutils literal notranslate"><span class="pre">GEN_SIZEOF()</span></code> commands can be removed.  To create and access
messages from Python the <code class="docutils literal notranslate"><span class="pre">message2</span></code> package is now used.</p></li>
<li><p>Update the C message definition include statement from</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">include</span><span class="w"> </span><span class="s">&quot;simMessages/OutputSimMsg.h&quot;</span>
</pre></div>
</div>
<p>to use the new common message folder location</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">include</span><span class="w"> </span><span class="s">&quot;architecture/msgPayloadDefC/OutputMsgPayload.h&quot;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">OutputMsg_C</span><span class="p">;</span>
</pre></div>
</div>
<p>If including a C++ message payload definition, then only use:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">include</span><span class="w"> </span><span class="s">&quot;architecture/msgPayloadDefCpp/OutputMsgPayload.h&quot;</span>
</pre></div>
</div>
</li>
<li><p>Any custom Swig’d interfaces to access message content, such as</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">template</span><span class="p">(</span><span class="n">RWConfigVector</span><span class="p">)</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RWConfigSimMsg</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>should be removed the <code class="docutils literal notranslate"><span class="pre">module.i</span></code> file and moved to <code class="docutils literal notranslate"><span class="pre">src/architecture/messaging/messaging.i</span></code>
file instead.  These interfaces can now be used by any module by importing <code class="docutils literal notranslate"><span class="pre">messaging</span></code> in the
Basilisk python script.</p>
</li>
<li><p>To create the swig interface to a vector of output message pointers of type <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>,
near the bottom of the <code class="docutils literal notranslate"><span class="pre">messaging.i</span></code> file add this line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">template</span><span class="p">(</span><span class="n">SomeOutMsgsVector</span><span class="p">)</span> <span class="n">std</span><span class="p">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&lt;</span><span class="n">SomeMsgPayload</span><span class="o">&gt;*&gt;</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Updating the <code class="docutils literal notranslate"><span class="pre">module.rst</span></code> documentation file:</p>
<blockquote>
<div><ul class="simple">
<li><p>In the table of module messages, update any message variable names that were changed
as well as the message definition from <code class="docutils literal notranslate"><span class="pre">SomeFswMsgPayload</span></code> to <code class="docutils literal notranslate"><span class="pre">SomeMsgPayload</span></code>.</p></li>
<li><p>If applicable, update the module msg I/O illustration</p></li>
<li><p>If there are links to message types in the source method descriptions, update these
to use the new message payload declaration.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<iframe width="560" height="315" src="https://www.youtube.com/embed/vAJ7G-ELDWA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="UnderstandingBasilisk.html" class="btn btn-neutral float-left" title="Basilisk Architecture Support Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MigratingToPython3.html" class="btn btn-neutral float-right" title="Migrating BSK Scripts to Python 3" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>