% !TEX root = ./Basilisk-magnetometer-20190926.tex

\section{Test Description and Success Criteria}

This section describes the specific unit tests conducted on this module. The test contains 16 tests and is located at test\_magnetometer.py. The simulation of the magnetic field truth vector is set up based on two magnetic field model test scripts: test\_magneticFieldCenteredDipole.py and test\_magneticFieldWMM.py. The success criteria is to match the outputs with the generated truth.

\section{Test Parameters}
Pytest runs the following cases in Table~\ref{tab:errortol} when it is called for this test: 
\begin{table}[htbp]
	\caption{Parameters for each test. Note that relative tolerance is $\frac{truth - output}{truth}$}
	\label{tab:errortol}
	\centering \fontsize{10}{10}\selectfont
	\begin{tabular}{ c | c | c | c | c | c } % Column formatting, 
	\hline\hline
	
		
		{\tt Test} & {\tt noiseStd} & {\tt bias} & {\tt saturation} & \tt{magMode} & \textbf{errTol}\\ \hline\hline
		1 
		& \input{AutoTex/cleanwmmNoiseStd}
		&\input{AutoTex/cleanwmmBias1},\input{AutoTex/cleanwmmBias2},\input{AutoTex/cleanwmmBias3}
		&\input{AutoTex/cleanwmmMinSaturation},\input{AutoTex/cleanwmmMaxSaturation}
		&\input{AutoTex/cleanwmmmagModel}
		&\input{AutoTex/cleanwmmErrTol}	   \\ \hline
		
		2 
		& \input{AutoTex/cleandipoleNoiseStd}
		&\input{AutoTex/cleandipoleBias1},\input{AutoTex/cleandipoleBias2},\input{AutoTex/cleandipoleBias3}
		&\input{AutoTex/cleandipoleMinSaturation},\input{AutoTex/cleandipoleMaxSaturation}
		&\input{AutoTex/cleandipolemagModel}
		&\input{AutoTex/cleandipoleErrTol}	   \\ \hline
		
		3 
		& \input{AutoTex/biaswmmNoiseStd}
		&\input{AutoTex/biaswmmBias1},\input{AutoTex/biaswmmBias2},\input{AutoTex/biaswmmBias3}
		&\input{AutoTex/biaswmmMinSaturation},\input{AutoTex/biaswmmMaxSaturation}
		&\input{AutoTex/biaswmmmagModel}
		&\input{AutoTex/biaswmmErrTol}	   \\ \hline
		
		4 
		& \input{AutoTex/biasdipoleNoiseStd}
		&\input{AutoTex/biasdipoleBias1},\input{AutoTex/biasdipoleBias2},\input{AutoTex/biasdipoleBias3}
		&\input{AutoTex/biasdipoleMinSaturation},\input{AutoTex/biasdipoleMaxSaturation}
		&\input{AutoTex/biasdipolemagModel}
		&\input{AutoTex/biasdipoleErrTol}	   \\ \hline
		
		5 
		& \input{AutoTex/boundwmmNoiseStd}
		&\input{AutoTex/boundwmmBias1},\input{AutoTex/boundwmmBias2},\input{AutoTex/boundwmmBias3}
		&\input{AutoTex/boundwmmMinSaturation},\input{AutoTex/boundwmmMaxSaturation}
		&\input{AutoTex/boundwmmmagModel}
		&\input{AutoTex/boundwmmErrTol}	   \\ \hline
		
		6 
		& \input{AutoTex/bounddipoleNoiseStd}
		&\input{AutoTex/bounddipoleBias1},\input{AutoTex/bounddipoleBias2},\input{AutoTex/bounddipoleBias3}
		&\input{AutoTex/bounddipoleMinSaturation},\input{AutoTex/bounddipoleMaxSaturation}
		&\input{AutoTex/bounddipolemagModel}
		&\input{AutoTex/bounddipoleErrTol}	   \\ \hline
		
		7 
		& \input{AutoTex/noisewmmNoiseStd}
		&\input{AutoTex/noisewmmBias1},\input{AutoTex/noisewmmBias2},\input{AutoTex/noisewmmBias3}
		&\input{AutoTex/noisewmmMinSaturation},\input{AutoTex/noisewmmMaxSaturation}
		&\input{AutoTex/noisewmmmagModel}
		&\input{AutoTex/noisewmmErrTol}	   \\ \hline
		
		8 
		& \input{AutoTex/noisedipoleNoiseStd}
		&\input{AutoTex/noisedipoleBias1},\input{AutoTex/noisedipoleBias2},\input{AutoTex/noisedipoleBias3}
		&\input{AutoTex/noisedipoleMinSaturation},\input{AutoTex/noisedipoleMaxSaturation}
		&\input{AutoTex/noisedipolemagModel}
		&\input{AutoTex/noisedipoleErrTol}	   \\ \hline
		
		9 
		& \input{AutoTex/boundbiaswmmNoiseStd}
		&\input{AutoTex/boundbiaswmmBias1},\input{AutoTex/boundbiaswmmBias2},\input{AutoTex/boundbiaswmmBias3}
		&\input{AutoTex/boundbiaswmmMinSaturation},\input{AutoTex/boundbiaswmmMaxSaturation}
		&\input{AutoTex/boundbiaswmmmagModel}
		&\input{AutoTex/boundbiaswmmErrTol}	   \\ \hline
		
		10 
		& \input{AutoTex/boundbiasdipoleNoiseStd}
		&\input{AutoTex/boundbiasdipoleBias1},\input{AutoTex/boundbiasdipoleBias2},\input{AutoTex/boundbiasdipoleBias3}
		&\input{AutoTex/boundbiasdipoleMinSaturation},\input{AutoTex/boundbiasdipoleMaxSaturation}
		&\input{AutoTex/boundbiasdipolemagModel}
		&\input{AutoTex/boundbiasdipoleErrTol}	   \\ \hline
		
		11 
		& \input{AutoTex/boundnoisewmmNoiseStd}
		&\input{AutoTex/boundnoisewmmBias1},\input{AutoTex/boundnoisewmmBias2},\input{AutoTex/boundnoisewmmBias3}
		&\input{AutoTex/boundnoisewmmMinSaturation},\input{AutoTex/boundnoisewmmMaxSaturation}
		&\input{AutoTex/boundnoisewmmmagModel}
		&\input{AutoTex/boundnoisewmmErrTol}	   \\ \hline
		
		12 
		& \input{AutoTex/boundnoisedipoleNoiseStd}
		&\input{AutoTex/boundnoisedipoleBias1},\input{AutoTex/boundnoisedipoleBias2},\input{AutoTex/boundnoisedipoleBias3}
		&\input{AutoTex/boundnoisedipoleMinSaturation},\input{AutoTex/boundnoisedipoleMaxSaturation}
		&\input{AutoTex/boundnoisedipolemagModel}
		&\input{AutoTex/boundnoisedipoleErrTol}	   \\ \hline
		
		13 
		& \input{AutoTex/noisebiaswmmNoiseStd}
		&\input{AutoTex/noisebiaswmmBias1},\input{AutoTex/noisebiaswmmBias2},\input{AutoTex/noisebiaswmmBias3}
		&\input{AutoTex/noisebiaswmmMinSaturation},\input{AutoTex/noisebiaswmmMaxSaturation}
		&\input{AutoTex/noisebiaswmmmagModel}
		&\input{AutoTex/noisebiaswmmErrTol}	   \\ \hline
		
		14 
		& \input{AutoTex/noisebiasdipoleNoiseStd}
		&\input{AutoTex/noisebiasdipoleBias1},\input{AutoTex/noisebiasdipoleBias2},\input{AutoTex/noisebiasdipoleBias3}
		&\input{AutoTex/noisebiasdipoleMinSaturation},\input{AutoTex/noisebiasdipoleMaxSaturation}
		&\input{AutoTex/noisebiasdipolemagModel}
		&\input{AutoTex/noisebiasdipoleErrTol}	   \\ \hline
		
		15 
		& \input{AutoTex/combinedwmmNoiseStd}
		&\input{AutoTex/combinedwmmBias1},\input{AutoTex/combinedwmmBias2},\input{AutoTex/combinedwmmBias3}
		&\input{AutoTex/combinedwmmMinSaturation},\input{AutoTex/combinedwmmMaxSaturation}
		&\input{AutoTex/combinedwmmmagModel}
		&\input{AutoTex/combinedwmmErrTol}	   \\ \hline
		
		16 
		& \input{AutoTex/combineddipoleNoiseStd}
		&\input{AutoTex/combineddipoleBias1},\input{AutoTex/combineddipoleBias2},\input{AutoTex/combineddipoleBias3}
		&\input{AutoTex/combineddipoleMinSaturation},\input{AutoTex/combineddipoleMaxSaturation}
		&\input{AutoTex/combineddipolemagModel}
		&\input{AutoTex/combineddipoleErrTol}	   \\ \hline
		
		\hline\hline
		

	\end{tabular}
\end{table}




\section{Test Results}
The following two tables show the test results.  All tests are expected to pass.



\begin{table}[H]
	\caption{Test result for {\tt test\_unitTestMagneticField.py}}
	\label{tab:results}
	\centering \fontsize{10}{10}\selectfont
	\begin{tabular}{c | c | c } % Column formatting, 
	\hline
	\textbf{Test} & \textbf{Pass/Fail} & \textbf{Notes} \\ \hline
	1      & \input{AutoTex/PassedTextcleanwmm} \\ \hline
	2      & \input{AutoTex/PassedTextcleandipole} \\ \hline
	3      & \input{AutoTex/PassedTextbiaswmm} \\ \hline
	4      & \input{AutoTex/PassedTextbiasdipole} \\ \hline
	5      & \input{AutoTex/PassedTextboundwmm} \\ \hline
	6      & \input{AutoTex/PassedTextbounddipole} \\ \hline
	7      & \input{AutoTex/PassedTextnoisewmm} \\ \hline
	8      & \input{AutoTex/PassedTextnoisedipole} \\ \hline
	9      & \input{AutoTex/PassedTextboundbiaswmm} \\ \hline
	10      & \input{AutoTex/PassedTextboundbiasdipole} \\ \hline
	11      & \input{AutoTex/PassedTextboundnoisewmm} \\ \hline
	12      & \input{AutoTex/PassedTextboundnoisedipole} \\ \hline
	13      & \input{AutoTex/PassedTextnoisebiaswmm} \\ \hline
	14      & \input{AutoTex/PassedTextnoisebiasdipole} \\ \hline
	15      & \input{AutoTex/PassedTextcombinedwmm} \\ \hline
	16      & \input{AutoTex/PassedTextcombineddipole} \\ \hline

	\end{tabular}
\end{table}



