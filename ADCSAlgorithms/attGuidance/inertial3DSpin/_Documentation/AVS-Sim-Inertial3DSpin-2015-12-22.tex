\documentclass[]{AVSSimReportMemo}
\usepackage{AVS}

\newcommand{\ModuleName}{inertial3DSpin}
\newcommand{\subject}{Guidance Module to Perform an Inertially Constant Spin}
\newcommand{\status}{Initial Version}
\newcommand{\preparer}{H. Schaub}
\newcommand{\summary}{Generate the reference attitude trajectory for a general 3D inertial spin with a constant inertial angular velocity vector.  A corrected body frame will align with the desired reference frame.     }


\begin{document}


\makeCover


%
%	enter the revision documentation here
%	to add more lines, copy the table entry and the \hline, and paste after the current entry.
%
\pagestyle{empty}
{\renewcommand{\arraystretch}{2}
\noindent
\begin{longtable}{|p{0.5in}|p{4.5in}|p{1.14in}|}
\hline
{\bfseries Rev}: & {\bfseries Change Description} & {\bfseries By} \\
\hline
Draft & initial copy & H. Schaub \\
\hline

\end{longtable}
}

\newpage
\setcounter{page}{1}
\pagestyle{fancy}

\tableofcontents
~\\ \hrule ~\\


\section{Introduction}
This technical note discusses the guidance mathematics to perform a constant spin about an inertially fixed axis.  Instead of aligning the body frame $\mathcal{B}$ with a desired reference frame $\mathcal{R}$, rather an arbitrary body-fixed frame can be driven towards the desired reference frame.  


\section{Reference Frame Definitions}
Let the primary body-fixed coordinate frame be \frameDefinition{B}. However, instead of aligning this frame with a reference, a corrected body frame $\mathcal{B}_{c}$ is to be aligned with a reference frame.   Let the uncorrected reference orientation be given by $\mathcal{R}_{0}$.  Thus, the guidance goal is to drive $\mathcal{B}_{c} \rightarrow \mathcal{R}_{0}$, which yields
\begin{equation}
	[R_{0} N] = [B_{c} B] [BN]
\end{equation}
where $\mathcal{N}$ is an inertial reference frame.  Rearranging this relationship, with perfect attitude tracking the inertial body frame orientation should be
\begin{equation}
	 [BN] = [B_{c} B]^{T} [R_{0}N]  = [RN]
\end{equation}
where $\mathcal{R}$ is a corrected reference frame.  Note that $[B_{c} B] = [R_{0}R]$.  Thus, the corrected reference orientation is computed using
\begin{equation}
	 [RN] = [R_{0} R]^{T} [R_{0}N] 
\end{equation}
where the body-frame correction is subtracted from the original reference orientation.  

The benefit of of driving $\mathcal{B} \rightarrow \mathcal{R}$ instead of $\mathcal{B}_{c} \rightarrow \mathcal{R}_{0}$ is that the body frame, along with the many device position and orientation vectors expressed in  body-frame components, don't have to be rotated for each control evaluation.  In simple terms, if the corrected body frame is a 60\dg rotation from the body frame, then the 60\dg is subtracted from the original reference orientation.  This allows all body inertia tensor and reaction wheel heading vector descriptions to remain in the primary body frame $\mathcal{B}$.  

Assume the initial uncorrected reference frame $\mathcal{R_{0}}$ is given through the MRP set $\bm\sigma_{R_{0}/N}$
\begin{equation}
	[R_{0}N(	\bm\sigma_{R_{0}/N})]
\end{equation}
The relative orientation of the corrected body frame relative to the primary body frame is a constant MRP set
\begin{equation}
	[B_{c}B(\bm\sigma_{B_{c}/B})] = [R_{0}R(\bm\sigma_{R_{0}/R})]
\end{equation}
To apply this correction to the original reference frame, using the Direction Cosine Matrix (DCM) description, this is determined through
\begin{equation}
	[RN(\bm\sigma_{R/N})] = [R_{0}R(\bm\sigma_{R_{0}/R})]^{T} [R_{0}N(\bm\sigma_{R_{0}/N})] = 
	[R_{0}R(-\bm\sigma_{R_{0}/R})] [R_{0}N(\bm\sigma_{R_{0}/N})]
\end{equation}
where the convenient MRP identity
\begin{equation}
	 [R_{0}R(\bm\sigma_{R_{0}/R})]^{T} = [R_{0}R(-\bm\sigma_{R_{0}/R})] 
\end{equation}

Note the following MRP addition property developed in Reference~\citenum{schaub}.  If
\begin{equation}
	[BN(\bm\sigma)] = [FB(\bm\sigma '')] [ BN(\bm\sigma ')]
\end{equation}
then
\begin{equation}
	\bm\sigma = \frac{
		(1-|\bm\sigma'|^{2})\bm\sigma '' + (1-|\bm\sigma ''|^{2}) \bm\sigma ' - 2 \bm\sigma '' \times \bm\sigma '
	}{
		1 + |\bm\sigma '|^{2} |\bm\sigma''|^{2} - 2 \bm\sigma' \cdot \bm\sigma''
	}
\end{equation}
In the RigidBodyKinematics software library of Reference~\citenum{schaub}, this MRP evaluation is achieved with 
$$
	\bm\sigma = {\tt addMRP}(\bm\sigma ', \bm\sigma'')
$$
Thus, to properly apply the body frame orientation correction to the original reference frame, this function should be used with
$$
	\bm\sigma_{R/N} = {\tt addMRP}(\bm\sigma_{R_{0}/N}, -\bm\sigma_{R_{0}/R})
$$






\section{Reference Frame Angular Velocity Vector}
The angular velocity of the original reference frame $\mathcal{R}_{0}$ is
\begin{equation}
	\bm\omega_{R_{0}/N}
\end{equation}
The angular velocity tracking error is defined as
\begin{equation}
	\delta\bm\omega = \bm\omega_{B/N} - \bm\omega_{R/N}
\end{equation}
The correct reference frame angular velocity is
\begin{equation}
	\bm\omega_{R/N} = \bm\omega_{R/R_{0}} + \bm\omega_{R_{0}/N} =  \bm\omega_{R_{0}/N} 
\end{equation}
because the body frame correction $[B_{c} B] = [R_{0}R]$ is a constant angular offset.  



\section{Reference Frame Propagation}
The MRP differential kinematic equations are
\begin{equation}
	\bm\sigma_{R/N} = \frac{1}{4} [B(\bm\sigma_{R/N})] \leftexp{R}{\bm\omega}_{R/N}
\end{equation}
where
\begin{equation}
	[B(\bm\sigma_{R/N})] = (1-\sigma_{R/N}^{2}) [I_{3\times 3}] + 2 [\tilde{\bm\sigma}_{R/N}] + 2 \bm\sigma_{R/N} \bm\sigma_{R/N}^{T}
\end{equation}

If there inertially fixed reference angular velocity vector is given in inertial frame components, it must be rotated using the appropriate DCM:
\begin{equation}
	\leftexp{R}{\bm\omega_{R/N}} = [RN] \leftexp{N}{\bm\omega_{R/N}}
\end{equation}

\bibliographystyle{unsrt}
\bibliography{references}

\end{document}
