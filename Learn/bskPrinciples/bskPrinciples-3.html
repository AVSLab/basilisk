

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connecting Messages &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Recording Messages" href="bskPrinciples-4.html" />
    <link rel="prev" title="Seeing the Order of Process, Task and Module Execution" href="bskPrinciples-2b.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../bskPrinciples.html">Fundamentals of Basilisk Simulations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-0.html">What is Basilisk</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-1.html">Basilisk Process and Task Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-2.html">Adding Basilisk Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-2a.html">Execution of Basilisk Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-2b.html">Seeing the Order of Process, Task and Module Execution</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Connecting Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-4.html">Recording Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-5.html">Creating Stand-Alone Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-6.html">Setting and Recording Module Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-7.html">Advanced: Redirecting Module Output to Stand-Alone Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-8.html">Advanced: Enabling and Disabling Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-9.html">Advanced: Using <code class="docutils literal notranslate"><span class="pre">DynamicObject</span></code> Basilisk Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="bskPrinciples-10.html">Advanced: Handling <code class="docutils literal notranslate"><span class="pre">BasiliskException</span></code> in Simulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Integrated Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="../bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
      <li class="breadcrumb-item active">Connecting Messages</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Learn/bskPrinciples/bskPrinciples-3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <iframe width="560" height="315" src="https://www.youtube.com/embed/F7pcy5dkZw4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><section id="connecting-messages">
<span id="bskprinciples-3"></span><h1>Connecting Messages<a class="headerlink" href="#connecting-messages" title="Link to this heading">ÔÉÅ</a></h1>
<aside class="sidebar">
<p class="sidebar-title">Source Code</p>
<p>The python code shown below can be downloaded <a class="reference download internal" download="" href="../../_downloads/821b34b167141eb490d4681e19f91a08/bsk-3.py"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
</aside>
<p>So far we have learned how to add C or C++ Basilisk modules to a task, setting priorities to execute those modules, and specifying update rates; next we will look at how to connect module messages to one another. Messages are anything that a module outputs after it is executed, such as spacecraft state information, battery power, etc.  Again we use both <a class="reference internal" href="../../Documentation/moduleTemplates/cModuleTemplate/cModuleTemplate.html#cmoduletemplate"><span class="std std-ref">Module: cModuleTemplate</span></a> and <a class="reference internal" href="../../Documentation/moduleTemplates/cppModuleTemplate/cppModuleTemplate.html#cppmoduletemplate"><span class="std std-ref">Module: cppModuleTemplate</span></a> as the stand-in modules to illustrate setting message connections.  Note that the input and output message connections of these modules are of the same type.  The following simulation script again uses a single process and task.  The modules are created and their input and output messages are connected as illustrated below.</p>
<img alt="../../_images/qs-bsk-3.svg" class="align-center" src="../../_images/qs-bsk-3.svg" />
<p>The source code is shown below.  As we are going to be using the Basilisk messaging system now, it is important to import the <code class="docutils literal notranslate"><span class="pre">messaging</span></code> package from <code class="docutils literal notranslate"><span class="pre">Basilisk.architecture</span></code>.  Without this the python code will not know how to subscribe to any message type, or how to create a stand-alone message.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.moduleTemplates</span><span class="w"> </span><span class="kn">import</span> <span class="n">cModuleTemplate</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.moduleTemplates</span><span class="w"> </span><span class="kn">import</span> <span class="n">cppModuleTemplate</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimulationBaseClass</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">macros</span>
<span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">Basilisk.architecture</span><span class="w"> </span><span class="kn">import</span> <span class="n">messaging</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">():</span>
<span class="linenos">10</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">11</span><span class="sd">    Illustration of connecting module messages</span>
<span class="linenos">12</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="c1">#  Create a sim module as an empty container</span>
<span class="linenos">15</span>    <span class="n">scSim</span> <span class="o">=</span> <span class="n">SimulationBaseClass</span><span class="o">.</span><span class="n">SimBaseClass</span><span class="p">()</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="c1">#  create the simulation process</span>
<span class="linenos">18</span>    <span class="n">dynProcess</span> <span class="o">=</span> <span class="n">scSim</span><span class="o">.</span><span class="n">CreateNewProcess</span><span class="p">(</span><span class="s2">&quot;dynamicsProcess&quot;</span><span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="c1"># create the dynamics task and specify the integration update time</span>
<span class="linenos">21</span>    <span class="n">dynProcess</span><span class="o">.</span><span class="n">addTask</span><span class="p">(</span><span class="n">scSim</span><span class="o">.</span><span class="n">CreateNewTask</span><span class="p">(</span><span class="s2">&quot;dynamicsTask&quot;</span><span class="p">,</span> <span class="n">macros</span><span class="o">.</span><span class="n">sec2nano</span><span class="p">(</span><span class="mf">5.</span><span class="p">)))</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="c1"># create modules</span>
<span class="linenos">24</span>    <span class="n">mod1</span> <span class="o">=</span> <span class="n">cModuleTemplate</span><span class="o">.</span><span class="n">cModuleTemplate</span><span class="p">()</span>
<span class="linenos">25</span>    <span class="n">mod1</span><span class="o">.</span><span class="n">ModelTag</span> <span class="o">=</span> <span class="s2">&quot;cModule1&quot;</span>
<span class="linenos">26</span>
<span class="linenos">27</span>    <span class="n">mod2</span> <span class="o">=</span> <span class="n">cppModuleTemplate</span><span class="o">.</span><span class="n">CppModuleTemplate</span><span class="p">()</span>
<span class="linenos">28</span>    <span class="n">mod2</span><span class="o">.</span><span class="n">ModelTag</span> <span class="o">=</span> <span class="s2">&quot;cppModule2&quot;</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="c1"># add modules to task list</span>
<span class="linenos">31</span>    <span class="n">scSim</span><span class="o">.</span><span class="n">AddModelToTask</span><span class="p">(</span><span class="s2">&quot;dynamicsTask&quot;</span><span class="p">,</span> <span class="n">mod1</span><span class="p">)</span>
<span class="linenos">32</span>    <span class="n">scSim</span><span class="o">.</span><span class="n">AddModelToTask</span><span class="p">(</span><span class="s2">&quot;dynamicsTask&quot;</span><span class="p">,</span> <span class="n">mod2</span><span class="p">)</span>
<span class="linenos">33</span>
<span class="linenos">34</span>    <span class="c1"># connect messages</span>
<span class="linenos">35</span>    <span class="n">mod2</span><span class="o">.</span><span class="n">dataInMsg</span><span class="o">.</span><span class="n">subscribeTo</span><span class="p">(</span><span class="n">mod1</span><span class="o">.</span><span class="n">dataOutMsg</span><span class="p">)</span>
<span class="linenos">36</span>    <span class="n">mod1</span><span class="o">.</span><span class="n">dataInMsg</span><span class="o">.</span><span class="n">subscribeTo</span><span class="p">(</span><span class="n">mod2</span><span class="o">.</span><span class="n">dataOutMsg</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span>    <span class="c1">#  initialize Simulation:</span>
<span class="linenos">39</span>    <span class="n">scSim</span><span class="o">.</span><span class="n">InitializeSimulation</span><span class="p">()</span>
<span class="linenos">40</span>
<span class="linenos">41</span>    <span class="c1">#   configure a simulation stop time and execute the simulation run</span>
<span class="linenos">42</span>    <span class="n">scSim</span><span class="o">.</span><span class="n">ConfigureStopTime</span><span class="p">(</span><span class="n">macros</span><span class="o">.</span><span class="n">sec2nano</span><span class="p">(</span><span class="mf">5.0</span><span class="p">))</span>
<span class="linenos">43</span>    <span class="n">scSim</span><span class="o">.</span><span class="n">ExecuteSimulation</span><span class="p">()</span>
<span class="linenos">44</span>
<span class="linenos">45</span>    <span class="k">return</span>
<span class="linenos">46</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">49</span>    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">.subscribeTo()</span></code> connects an output message (variable name ending with <code class="docutils literal notranslate"><span class="pre">OutMsg</span></code>) to an input message (variable name ending with <code class="docutils literal notranslate"><span class="pre">InMsg</span></code>), as shown in lines 36-37 above.  While C modules contain message objects with a C interface, and C++ modules contain C++ message objects, the <code class="docutils literal notranslate"><span class="pre">.subscribeTo()</span></code> method is set up such that the user doesn‚Äôt have to worry about this distinction.  Rather, this method connects C to C, C to C++, C++ to C++ and C++ to C message connections.</p>
<p>Thus, a module output message <code class="docutils literal notranslate"><span class="pre">anotherModule.xxxOutMsg</span></code> is connected to a module input message <code class="docutils literal notranslate"><span class="pre">someModule.xxxInMsg</span></code> using the <code class="docutils literal notranslate"><span class="pre">.subscribeTo()</span></code> method as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">someModule</span><span class="o">.</span><span class="n">xxxInMsg</span><span class="o">.</span><span class="n">subscribeTo</span><span class="p">(</span><span class="n">anotherModule</span><span class="o">.</span><span class="n">xxxOutMsg</span><span class="p">)</span>
</pre></div>
</div>
<p>The input and output message names are arbitrary.  However, the messages being connected must be of the same type.
In the above simulation code we use this protocol to connect the output message of the C module 1 to the input message of C++ module 2.  Next the output of C++ module 2 is connected to the input of C module 1 to create a sample closed-loop messaging setup.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can only subscribe an input message to an output message that already exists!  Don‚Äôt try to subscribe to the message before it has been created.  In this simulation the subscriptions are all occurring after the modules are created.</p>
</div>
<p>If you execute this python code you should see the following terminal output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="o">/</span><span class="n">codeSamples</span> <span class="o">%</span> <span class="n">python3</span> <span class="n">bsk</span><span class="o">-</span><span class="mf">3.</span><span class="n">py</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">Variable</span> <span class="n">dummy</span> <span class="nb">set</span> <span class="n">to</span> <span class="mf">0.000000</span> <span class="ow">in</span> <span class="n">reset</span><span class="o">.</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">Variable</span> <span class="n">dummy</span> <span class="nb">set</span> <span class="n">to</span> <span class="mf">0.000000</span> <span class="ow">in</span> <span class="n">reset</span><span class="o">.</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">C</span> <span class="n">Module</span> <span class="n">ID</span> <span class="mi">1</span> <span class="n">ran</span> <span class="n">Update</span> <span class="n">at</span> <span class="mf">0.000000</span><span class="n">s</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">C</span><span class="o">++</span> <span class="n">Module</span> <span class="n">ID</span> <span class="mi">2</span> <span class="n">ran</span> <span class="n">Update</span> <span class="n">at</span> <span class="mf">0.000000</span><span class="n">s</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">C</span> <span class="n">Module</span> <span class="n">ID</span> <span class="mi">1</span> <span class="n">ran</span> <span class="n">Update</span> <span class="n">at</span> <span class="mf">5.000000</span><span class="n">s</span>
<span class="n">BSK_INFORMATION</span><span class="p">:</span> <span class="n">C</span><span class="o">++</span> <span class="n">Module</span> <span class="n">ID</span> <span class="mi">2</span> <span class="n">ran</span> <span class="n">Update</span> <span class="n">at</span> <span class="mf">5.000000</span><span class="n">s</span>
</pre></div>
</div>
<p>Note that here the two modules are added without setting a priority.  Thus, they are executed in the order that they were added to the Basilisk task.</p>
<p>If you want to undo any existing connection to a module input message <code class="docutils literal notranslate"><span class="pre">someModule.xxxInMsg</span></code>, you need to use the <code class="docutils literal notranslate"><span class="pre">.unsubscribe()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">someModule</span><span class="o">.</span><span class="n">xxxInMsg</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">()</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bskPrinciples-2b.html" class="btn btn-neutral float-left" title="Seeing the Order of Process, Task and Module Execution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bskPrinciples-4.html" class="btn btn-neutral float-right" title="Recording Messages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>