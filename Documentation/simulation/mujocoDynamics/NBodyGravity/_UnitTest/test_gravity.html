

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>test_gravity &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="PIDControllers" href="../../PIDControllers/index.html" />
    <link rel="prev" title="_UnitTest" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../../../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Learn.html">Learning Basilisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Support.html">Support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../architecture/index.html">architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../fswAlgorithms/index.html">fswAlgorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../moduleTemplates/index.html">moduleTemplates</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">simulation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../deviceInterface/index.html">deviceInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dynamics/index.html">dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../environment/index.html">environment</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">mujocoDynamics</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">NBodyGravity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../PIDControllers/index.html">PIDControllers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_GeneralModuleFiles/index.html">_GeneralModuleFiles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../navigation/index.html">navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../onboardDataHandling/index.html">onboardDataHandling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../power/index.html">power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensors/index.html">sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../simSynch/index.html">simSynch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../thermal/index.html">thermal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vizard/index.html">vizard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../utilities/index.html">utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Documentation</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">simulation</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">mujocoDynamics</a></li>
          <li class="breadcrumb-item"><a href="../index.html">NBodyGravity</a></li>
          <li class="breadcrumb-item"><a href="index.html">_UnitTest</a></li>
      <li class="breadcrumb-item active">test_gravity</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/Documentation/simulation/mujocoDynamics/NBodyGravity/_UnitTest/test_gravity.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="test-gravity">
<span id="id1"></span><h1>test_gravity<a class="headerlink" href="#test-gravity" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<dl class="py function" id="module-test_gravity">
<dt class="sig sig-object py" id="test_gravity.loadSatelliteTrajectory">
<span class="sig-prename descclassname"><span class="pre">test_gravity.</span></span><span class="sig-name descname"><span class="pre">loadSatelliteTrajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">utcCalInit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTimeSeconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtSeconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_gravity.html#loadSatelliteTrajectory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_gravity.loadSatelliteTrajectory" title="Link to this definition"></a></dt>
<dd><p>Loads the trajectory of a GPS satellite from SPICE kernels from the
given date (<code class="docutils literal notranslate"><span class="pre">utcCalInit</span></code>), for <code class="docutils literal notranslate"><span class="pre">stopTimeSeconds</span></code> seconds, with the position
reported every <code class="docutils literal notranslate"><span class="pre">dtSeconds</span></code> seconds.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="test_gravity.test_dumbbell">
<span class="sig-prename descclassname"><span class="pre">test_gravity.</span></span><span class="sig-name descname"><span class="pre">test_dumbbell</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initialAngularRate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_gravity.html#test_dumbbell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_gravity.test_dumbbell" title="Link to this definition"></a></dt>
<dd><p>Test gravity on a compound spacecraft made up of two point masses
rigidly connected but separated by 200 m:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  _____
 /     \            &lt;----------- 200 m -----------&gt;
| Earth |          O---------------@---------------O
 \_____/        &#39;left&#39;          &#39;center&#39;         &#39;right&#39;
</pre></div>
</div>
<p>The ‘left’ body starts closer to the Earth. The ‘right’ body has the same
mass as the ‘left’ body and starts further from the Earth. The ‘left’, ‘right’,
and center of the Earth are initially located in the same line. ‘center’ is
a “fictitious” (zero-mass) body that we can use to represent the center of
mass of the spacecraft.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">initialAngularRate</span></code> is True, then the total configuration is given
an angular velocity equal to 2pi over the period of the orbit, which means
that the body will tend to rotate about its center once every time the
spacecraft rotates about the Earth. If <code class="docutils literal notranslate"><span class="pre">initialAngularRate</span></code> is False, then
no initial rotation rate is given</p>
<p>We can check two things:</p>
<ul class="simple">
<li><p>The center of mass of this spacecraft should maintain constant
orbital parameters given that this is a point-mass problem and
all bodies are rigidly connected.</p></li>
<li><p>The two bodies are far apart enough for the gravity gradient to
be noticeable over an orbit. The gradient will tend to
keep the line connecting the two masses parallel to the line connecting
the Earth to the spacecraft (keep the spacecraft pointing towards Earth).</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">initialAngularRate</span></code> is True, then the initial angular rate
is such that this pointing is also maintained. Since we have both
the initial rate and gravity gradient favoring this alignment, we can
expect the alignment to indeed be maintained exactly through the orbit.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">initialAngularRate</span></code> is False, then alignment will not be maintained
exactly, but the gradient is strong enough that we can expect the “inner”
body to always remain closer to Earth than the “outer” body, since it feels
a stronger gravity pull.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="test_gravity.test_gps">
<span class="sig-prename descclassname"><span class="pre">test_gravity.</span></span><span class="sig-name descname"><span class="pre">test_gps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useSphericalHarmonics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useThirdBodies</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_gravity.html#test_gps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_gravity.test_gps" title="Link to this definition"></a></dt>
<dd><p>Compares the trajectory produced by Basilisk with the true trajectory
of a GPS satellite, as obtained from SPICE kernels.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">useSphericalHarmonics</span></code> and <code class="docutils literal notranslate"><span class="pre">useThirdBodies</span></code> entries can be used to
tune the accuracy of the gravity model, and thus how close should the
Basilisk result be to the SPICE data.</p>
<p>The satellite state is initialized from SPICE, then propagated with Basilisk
for 1 hour. The final state is expected to match the SPICE state at the time
by:</p>
<ul class="simple">
<li><p>&lt; 300 m if point mass gravity is used.</p></li>
<li><p>&lt; 30 m if spherical harmonics is used by no third-body effects.</p></li>
<li><p>&lt; 30 m if spherical harmonics and third-body effects are considered.</p></li>
</ul>
<p>Note that the inclusion of third body effects seems to have no effect on the
accuracy. Something that should be investigated further.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="test_gravity.test_mujocoVsSpacecraft">
<span class="sig-prename descclassname"><span class="pre">test_gravity.</span></span><span class="sig-name descname"><span class="pre">test_mujocoVsSpacecraft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useSpice</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useSphericalHarmonics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useThirdBodies</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_gravity.html#test_mujocoVsSpacecraft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_gravity.test_mujocoVsSpacecraft" title="Link to this definition"></a></dt>
<dd><p>Tests that the same scenario (simple LEO orbit with only gravity)
produces the same results when running with a <code class="docutils literal notranslate"><span class="pre">spacecraft.Spacecraft</span></code>
dynamical object and a <code class="docutils literal notranslate"><span class="pre">mujoco.MJScene</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">showPlots</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the scenario is run for 24 hr and the
differences are shown in plots. If it’s <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the scenario
is only run for 10 seconds and an assertion is raised if the results
disagree on a very tight tolerances.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="test_gravity.test_pointMass">
<span class="sig-prename descclassname"><span class="pre">test_gravity.</span></span><span class="sig-name descname"><span class="pre">test_pointMass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showPlots</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_gravity.html#test_pointMass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_gravity.test_pointMass" title="Link to this definition"></a></dt>
<dd><p>Test that the gravity model with point-mass gravity conserves the
initial orbital elements after two orbits.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="_UnitTest" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../PIDControllers/index.html" class="btn btn-neutral float-right" title="PIDControllers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>