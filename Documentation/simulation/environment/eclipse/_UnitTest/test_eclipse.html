

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>test_eclipse &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ephemerisConverter" href="../../ephemerisConverter/index.html" />
    <link rel="prev" title="_UnitTest" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Basilisk
              <img src="../../../../../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Learn.html">Learning Basilisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Support.html">Support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../architecture/index.html">architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../fswAlgorithms/index.html">fswAlgorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../moduleTemplates/index.html">moduleTemplates</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">simulation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../deviceInterface/index.html">deviceInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dynamics/index.html">dynamics</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">environment</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../ExponentialAtmosphere/index.html">ExponentialAtmosphere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../MsisAtmosphere/index.html">MsisAtmosphere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../TabularAtmosphere/index.html">TabularAtmosphere</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_GeneralModuleFiles/index.html">_GeneralModuleFiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../albedo/index.html">albedo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dentonFluxModel/index.html">dentonFluxModel</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">eclipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ephemerisConverter/index.html">ephemerisConverter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../groundLocation/index.html">groundLocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../groundMapping/index.html">groundMapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../magneticFieldCenteredDipole/index.html">magneticFieldCenteredDipole</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../magneticFieldWMM/index.html">magneticFieldWMM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../planetEphemeris/index.html">planetEphemeris</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../solarFlux/index.html">solarFlux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../spacecraftLocation/index.html">spacecraftLocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../spiceInterface/index.html">spiceInterface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../mujocoDynamics/index.html">mujocoDynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../navigation/index.html">navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../onboardDataHandling/index.html">onboardDataHandling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../power/index.html">power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensors/index.html">sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../simSynch/index.html">simSynch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../thermal/index.html">thermal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vizard/index.html">vizard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../utilities/index.html">utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Documentation</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">simulation</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">environment</a></li>
          <li class="breadcrumb-item"><a href="../index.html">eclipse</a></li>
          <li class="breadcrumb-item"><a href="index.html">_UnitTest</a></li>
      <li class="breadcrumb-item active">test_eclipse</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/Documentation/simulation/environment/eclipse/_UnitTest/test_eclipse.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="test-eclipse">
<span id="id1"></span><h1>test_eclipse<a class="headerlink" href="#test-eclipse" title="Link to this heading">ÔÉÅ</a></h1>
<div class="toctree-wrapper compound">
</div>
<dl class="py function" id="module-test_eclipse">
<dt class="sig sig-object py" id="test_eclipse.test_unitEclipse">
<span class="sig-prename descclassname"><span class="pre">test_eclipse.</span></span><span class="sig-name descname"><span class="pre">test_unitEclipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eclipseCondition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">planet</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_eclipse.html#test_unitEclipse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_eclipse.test_unitEclipse" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p><strong>Test Description and Success Criteria</strong></p>
<p>The unit test validates the internal aspects of the Basilisk eclipse module by comparing simulated output with expected output. It validates the computation of a shadow factor for total eclipse, partial eclipse,annular eclipse, and no eclipse scenarios. The test is designed to analyze one type at a time for both Earth and Mars and is then repeated for all three.</p>
<p>Earth is set as the zero base for all eclipse types to test it as the occulting body. For full, partial, and no eclipse cases, orbital elements describing the spacecraft states are then converted to Cartesian vectors. These orbital elements vary for each eclipse type since the Sun and planet states are fixed. The conversion is made using the orbitalMotion elem2rv function, where the inputs are six orbital elements (a, e, i, Omega, omega, f) and the outputs are Cartesian position and velocity vectors. For the annular eclipse case, the conversion is avoided and a Cartesian position vector is initially provided instead. The vectors are then passed into spacecraft and, subsequently, the eclipse module through the Basilisk messaging system.</p>
<p>Testing the no eclipse case with Mars as the occulting body is the same as the Earth no eclipse test, except Mars is set as the zero base. The Mars full, partial, and annular eclipse cases, however, are like the Earth annular case where Cartesian vectors are, instead, the initial inputs. Since the test is performed as a single step process, the velocity is not necessarily needed as an input, so only a position vector is provided for these cases.</p>
<p>The shadow factor obtained through the module is compared to the expected result, which is either trivial or calculated, depending on the eclipse type. Full eclipse and no eclipse shadow factors are compared without the need for computation, since they are just 0.0 and 1.0, respectively. The partial and annular eclipse shadow factors, however, vary between 0.0 and 1.0, based on the cone dimensions, and are calculated using MATLAB and Spice data.</p>
<p><strong>Test Parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eclipseCondition</span></code>: [string]
defines if the eclipse is partial, full, none or annular</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">planet</span></code>: [string]
defines which planet to use.  Options include ‚Äúearth‚Äù and ‚Äúmars‚Äù</p></li>
</ul>
<p><strong>Description of Variables Being Tested</strong></p>
<p>In each test scenario the shadow eclipse variable</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">shadowFactor</span></code></p>
</div></blockquote>
<p>is pulled from the log data and compared to expected truth values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="test_eclipse.test_unitEclipseCustom">
<span class="sig-prename descclassname"><span class="pre">test_eclipse.</span></span><span class="sig-name descname"><span class="pre">test_unitEclipseCustom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/test_eclipse.html#test_unitEclipseCustom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#test_eclipse.test_unitEclipseCustom" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p><strong>Test Description and Success Criteria</strong></p>
<p>The unit test validates the internal aspects of the Basilisk eclipse module by comparing simulated output with expected output. It validates the computation of a shadow factor for total eclipse using a custom gravity body.</p>
<p>This unit test sets up a custom gravity body, the asteroid Bennu, using the planetEphemeris module (i.e. Spice is not used for this test.) An empty spice planet message is created for the sun. The spacecraft is set 500 m on the side of the asteroid opposite of the sun.</p>
<p>The shadow factor obtained through the module is compared to the expected result, which is trivial to compute.</p>
<p><strong>Description of Variables Being Tested</strong></p>
<p>In this test scenario the shadow eclipse variable</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">shadowFactor</span></code></p>
</div></blockquote>
<p>is pulled from the log data and compared to the expected truth value.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="_UnitTest" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../ephemerisConverter/index.html" class="btn btn-neutral float-right" title="ephemerisConverter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>