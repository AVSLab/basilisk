

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scenarioMonteCarloAttRW &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=3cd7d658"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scenarioMonteCarloSpice" href="scenarioMonteCarloSpice.html" />
    <link rel="prev" title="scenario_OpNavAttODMC" href="OpNavScenarios/scenariosOpNav/OpNavMC/scenario_OpNavAttODMC.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../index.html" class="icon icon-home">
            Basilisk
              <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#attitude-simulations">Attitude Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#monte-carlo-simulations">Monte Carlo Simulations</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">MC run with RW control</a></li>
<li class="toctree-l4"><a class="reference internal" href="scenarioMonteCarloSpice.html">MC run using Python Spice setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="MonteCarloExamples/index.html">MC bskSim example folder with bokeh visualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="scenarioDragSensitivity.html">Sensitivity Analysis of a differential drag spacecraft control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active">scenarioMonteCarloAttRW</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/scenarioMonteCarloAttRW.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenariomontecarloattrw">
<span id="id1"></span><h1>scenarioMonteCarloAttRW<a class="headerlink" href="#scenariomontecarloattrw" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<span id="module-scenarioMonteCarloAttRW"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Demonstrates how to run basic Monte-Carlo (MC) RW-based attitude simulations.
This script duplicates the scenario in <a class="reference internal" href="scenarioAttitudeFeedbackRW.html#scenarioattitudefeedbackrw"><span class="std std-ref">scenarioAttitudeFeedbackRW</span></a> where a
6-DOF spacecraft is orbiting the Earth. Here some simulation parameters are dispersed randomly
using a multi-threaded Monte-Carlo setup. Reaction Wheel (RW) state effector are added
to the rigid spacecraft() hub, and what flight algorithm module is used to control these RWs.
The scenario is run in a single configuration: by not using the Jitter model and by using the RW Voltage IO.
Given this scenario we can add dispersions to the variables in between each MC run.</p>
<p>The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenarioMonteCarloAttRW</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>For more information on the Attitude Feedback Simulation with RW, please see the documentation
on the <a class="reference internal" href="scenarioAttitudeFeedbackRW.html#scenarioattitudefeedbackrw"><span class="std std-ref">scenarioAttitudeFeedbackRW</span></a> file.</p>
</section>
<section id="bokeh-visualization-and-data-management">
<h2>Bokeh Visualization and Data Management<a class="headerlink" href="#bokeh-visualization-and-data-management" title="Link to this heading"></a></h2>
<p>This script includes options for interactive visualization using Bokeh and data management:</p>
<ol class="arabic">
<li><p>To use the Bokeh server for interactive visualization, run the script with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">scenarioMonteCarloAttRW</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">bokeh</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p>IMPORTANT: When using Bokeh visualization, delete_data MUST be set to False in the run() function call.
The –delete-data flag must not be used, as Bokeh requires the data files to remain available for
interactive plotting. The run() function should be called with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dirName</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">saveFigures</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">show_plots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_data</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">useBokeh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>For matplotlib visualization, you can automatically delete Monte Carlo data after generating plots
by adding the –delete-data flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">scenarioMonteCarloAttRW</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">data</span>
</pre></div>
</div>
</li>
</ol>
<p>The –delete-data option will remove the Monte Carlo data directory after the plots are generated,
helping to manage disk space when running multiple simulations. However, this option is incompatible
with Bokeh visualization since Bokeh requires the data files to remain available for interactive plotting.
When using Bokeh, delete_data must be explicitly set to False to ensure the data remains available for
the interactive visualization.</p>
</section>
<section id="enable-terminal-bar-to-show-simulation-progress">
<h2>Enable Terminal Bar to Show Simulation Progress<a class="headerlink" href="#enable-terminal-bar-to-show-simulation-progress" title="Link to this heading"></a></h2>
<p>To enable progress bar, one need to set <code class="docutils literal notranslate"><span class="pre">showProgressBar</span></code> data member of class SimulationParameters to true:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">monteCarlo</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">()</span>
<span class="n">monteCarlo</span><span class="o">.</span><span class="n">setShowProgressBar</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Method <code class="docutils literal notranslate"><span class="pre">setShowProgressBar</span></code> should be used to set variable <code class="docutils literal notranslate"><span class="pre">showProgressBar</span></code> as True with the above statement. After
enabling the progress bar, all the simulation run by <code class="docutils literal notranslate"><span class="pre">monteCarlo.ExecuteSimulation()</span></code> and
montoCarlo.runInitialConditions will show the progress bar in the terminal.</p>
</section>
<section id="setup-changes-for-monte-carlo-runs">
<h2>Setup Changes for Monte-Carlo Runs<a class="headerlink" href="#setup-changes-for-monte-carlo-runs" title="Link to this heading"></a></h2>
<p>In order to set up the multi-threaded MC simulation, the user must first instantiate the Controller class.
The function that is being simulated is the set in this class (in this case, it’s defined in the same file as the
MC scenario). The user can then set other variables such as the number of runs, the dispersion seeds, and number of
cores.</p>
<p>The next important step to setting up the MC runs is to disperse the necessary variables.
The dispersions that are set are listed in the following table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Input</p></th>
<th class="head"><p>Description of Element</p></th>
<th class="head"><p>Distribution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Inertial
attitude</p></td>
<td><p>Using Modified
Rodrigues Parameters</p></td>
<td><p>Uniform for all 3 rotations between [0, 2 pi]</p></td>
</tr>
<tr class="row-odd"><td><p>Inertial
rotation rate</p></td>
<td><p>Using omega vector</p></td>
<td><p>Normal dispersions for each of the rotation
components, each of mean 0 and standard
deviation 0.25 deg/s</p></td>
</tr>
<tr class="row-even"><td><p>Mass of the
hub</p></td>
<td><p>Total Mass of the
spacecraft</p></td>
<td><p>Uniform around +/-5% of expected values.
Bounds are [712.5, 787.5]</p></td>
</tr>
<tr class="row-odd"><td><p>Center of Mass
Offset</p></td>
<td><p>Position vector offset on
the actual center of mass,
and its theoretical
position</p></td>
<td><p>Normally around a mean [0, 0, 1], with standard
deviations of [0.05/3, 0.05/3, 0.1/3]</p></td>
</tr>
<tr class="row-even"><td><p>Inertia Tensor</p></td>
<td><p>3x3 inertia tensor.
Dispersed by 3 rotations</p></td>
<td><p>Normally about mean value of diag(900, 800, 600).
Each of the 3 rotations are normally distributed
with angles of mean 0 and standard deviation
0.1 deg.</p></td>
</tr>
<tr class="row-odd"><td><p>RW axes</p></td>
<td><p>The rotation axis for
each of the 3 wheels</p></td>
<td><p>Normally around a respective means [1,0,0],
[0,1,0], and [0,0,1] with respective standard
deviations [0.01/3, 0.005/3, 0.005/3],
[0.005/3, 0.01/3, 0.005/3], and
[0.005/3, 0.005/3, 0.01/3].</p></td>
</tr>
<tr class="row-even"><td><p>RW speeds</p></td>
<td><p>The rotation speed for
each of the 3 wheels</p></td>
<td><p>Uniform around  +/-5% of expected values. Bounds
are [95, 105], [190, 210], and [285, 315]</p></td>
</tr>
<tr class="row-odd"><td><p>Voltage to
Torque Gain</p></td>
<td><p>The gain between the
commanded torque and the
actual voltage</p></td>
<td><p>Uniform around  +/-5% of expected values. Bounds
are [0.019, 0.021]</p></td>
</tr>
</tbody>
</table>
<p>Next a retention policy is used to log the desired data. The simulation can now be run.
It returns the failed jobs, which should not occur.  When the MC have been executed,
the data can be accessed and tested in different ways.
This is explained in the example python code comments.</p>
</section>
<section id="illustration-of-simulation-results">
<h2>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">saveFigures</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">case</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useBokeh</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<img alt="../_images/scenarioMonteCarloAttRW_AttitudeError.svg" class="align-center" src="../_images/scenarioMonteCarloAttRW_AttitudeError.svg" />
<img alt="../_images/scenarioMonteCarloAttRW_RateTrackingError.svg" class="align-center" src="../_images/scenarioMonteCarloAttRW_RateTrackingError.svg" />
<img alt="../_images/scenarioMonteCarloAttRW_RWMotorTorque.svg" class="align-center" src="../_images/scenarioMonteCarloAttRW_RWMotorTorque.svg" />
<img alt="../_images/scenarioMonteCarloAttRW_RWSpeed.svg" class="align-center" src="../_images/scenarioMonteCarloAttRW_RWSpeed.svg" />
<img alt="../_images/scenarioMonteCarloAttRW_RWVoltage.svg" class="align-center" src="../_images/scenarioMonteCarloAttRW_RWVoltage.svg" />
</section>
<section id="object-management-in-monte-carlo-simulations">
<h2>Object Management in Monte Carlo Simulations<a class="headerlink" href="#object-management-in-monte-carlo-simulations" title="Link to this heading"></a></h2>
<p>When creating Monte Carlo simulations, all simulation objects must be added as attributes to the
simulation container (scSim). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scSim</span><span class="o">.</span><span class="n">scObject</span> <span class="o">=</span> <span class="n">spacecraft</span><span class="o">.</span><span class="n">Spacecraft</span><span class="p">()</span>
<span class="n">scSim</span><span class="o">.</span><span class="n">RW1</span> <span class="o">=</span> <span class="n">RW1</span>
<span class="n">scSim</span><span class="o">.</span><span class="n">rwVoltageIO</span> <span class="o">=</span> <span class="n">motorVoltageInterface</span><span class="o">.</span><span class="n">MotorVoltageInterface</span><span class="p">()</span>
</pre></div>
</div>
<p>This pattern is required for the Monte Carlo framework to:</p>
<ol class="arabic simple">
<li><p>Access and modify object parameters between runs (for dispersions)</p></li>
<li><p>Properly retain data through the RetentionPolicy mechanism</p></li>
<li><p>Ensure objects persist between simulation runs</p></li>
<li><p>Allow the Controller class to track and manage simulation state</p></li>
</ol>
<p>Without adding objects to scSim, the Monte Carlo framework wouldn’t be able to properly manage
the simulation across multiple runs and thus unexpected behavior will occur.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenarioMonteCarloAttRW.run">
<span class="sig-prename descclassname"><span class="pre">scenarioMonteCarloAttRW.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">saveFigures</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useBokeh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioMonteCarloAttRW.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioMonteCarloAttRW.run" title="Link to this definition"></a></dt>
<dd><p>The scenarios can be run with the followings setups parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>saveFigures</strong> (<em>bool</em>) – flag if the scenario figures should be saved for html documentation</p></li>
<li><p><strong>case</strong> (<em>int</em>) – Case 1 is normal MC, case 2 is initial condition run</p></li>
<li><p><strong>show_plots</strong> (<em>bool</em>) – Determines if the script should display plots</p></li>
<li><p><strong>delete_data</strong> (<em>bool</em>) – Flag to delete Monte Carlo data after running</p></li>
<li><p><strong>useBokeh</strong> (<em>bool</em>) – Flag to use Bokeh for plotting instead of matplotlib</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="OpNavScenarios/scenariosOpNav/OpNavMC/scenario_OpNavAttODMC.html" class="btn btn-neutral float-left" title="scenario_OpNavAttODMC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scenarioMonteCarloSpice.html" class="btn btn-neutral float-right" title="scenarioMonteCarloSpice" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>