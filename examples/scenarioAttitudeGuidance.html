

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scenarioAttitudeGuidance &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=3cd7d658"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scenarioAttGuideHyperbolic" href="scenarioAttGuideHyperbolic.html" />
    <link rel="prev" title="scenarioOrbitManeuverTH" href="scenarioOrbitManeuverTH.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../index.html" class="icon icon-home">
            Basilisk
              <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#attitude-simulations">Attitude Simulations</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-regulation-control">Attitude Regulation Control</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#attitude-guidance">Attitude Guidance</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-control-with-actuators">Attitude Control with Actuators</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-steering-control">Attitude Steering Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#monte-carlo-simulations">Monte Carlo Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active">scenarioAttitudeGuidance</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/scenarioAttitudeGuidance.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenarioattitudeguidance">
<span id="id1"></span><h1>scenarioAttitudeGuidance<a class="headerlink" href="#scenarioattitudeguidance" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-tG4OZzGJfQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Discusses how to use guidance modules to align the spacecraft frame to the orbit or Hill frame.
This script sets up a 6-DOF spacecraft which is orbiting the Earth.</p>
<p>The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenarioAttitudeGuidance</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The simulation layout is shown in the following illustration.  A single simulation process is created
which contains both the spacecraft simulation modules, as well as the Flight Software (FSW) algorithm
modules.</p>
<img alt="../_images/test_scenarioAttitudeGuidance.svg" class="align-center" src="../_images/test_scenarioAttitudeGuidance.svg" />
<p>When the simulation completes 4 plots are shown for the MRP attitude history, the rate
tracking errors, the control torque vector, as well as the projection of the body-frame B
axes <span class="math notranslate nohighlight">\(\hat b_1\)</span>, <span class="math notranslate nohighlight">\(\hat b_2\)</span> and <span class="math notranslate nohighlight">\(\hat b_3\)</span> onto the respect
Hill or Orbit frame axes <span class="math notranslate nohighlight">\(\hat\imath_r\)</span>,
<span class="math notranslate nohighlight">\(\hat\imath_{\theta}\)</span> and <span class="math notranslate nohighlight">\(\hat\imath_h\)</span>.  This latter plot illustrates how the body
is being aligned with respect to this Hill frame.</p>
<p>The basic simulation setup is the same as the one used in
<a class="reference internal" href="scenarioAttitudeFeedback.html#scenarioattitudefeedback"><span class="std std-ref">scenarioAttitudeFeedback</span></a>.
The dynamics simulation is setup using a <a class="reference internal" href="../Documentation/simulation/dynamics/spacecraft/spacecraft.html#spacecraft"><span class="std std-ref">Module: spacecraft</span></a> module to which a gravity
effector is attached.  Note that both the rotational and translational degrees of
freedom of the spacecraft hub are turned on here to get a 6-DOF simulation.  For more
information on how to setup orbit, see <a class="reference internal" href="scenarioBasicOrbit.html#scenariobasicorbit"><span class="std std-ref">scenarioBasicOrbit</span></a>.</p>
<p>In contrast to the simple inertial pointing guidance example <a class="reference internal" href="scenarioAttitudeFeedback.html#scenarioattitudefeedback"><span class="std std-ref">scenarioAttitudeFeedback</span></a>,
this module also requires the
spacecraft’s position and velocity information.  The planet ephemeris message relative to which the Hill pointing
is being achieved by connecting the <code class="docutils literal notranslate"><span class="pre">celBodyInMsg</span></code> message.
This is useful, for example, if orbiting the sun, and wanting to point the spacecraft back at the
Earth which is also orbiting the sun.
Note that if the celestial body ephemeris input message is not connected then
a zero message is created which corresponds to the planet having a zero position and velocity vector.
If non-zero ephemeris information is required then the input name must point
to a message of type <a class="reference internal" href="../Documentation/architecture/msgPayloadDefC/EphemerisMsgPayload.html#ephemerismsgpayload"><span class="std std-ref">EphemerisMsgPayload</span></a>.
In this scenario, however, the spacecraft is to point at the Earth while already orbiting the Earth and the input
message name is set to a dummy message.</p>
</section>
<section id="illustration-of-simulation-results">
<h2>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useAltBodyFrame</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>The default scenario shown has the <code class="docutils literal notranslate"><span class="pre">useAltBodyFrame</span></code> flag turned off.  This means that we seek
to align the body frame <em>B</em> with the Hill reference frame <span class="math notranslate nohighlight">\(\cal R\)</span>.    The
resulting attitude and control torque histories are shown below.  Note that the projections
of the body frame axes onto the Hill frame axes all converge to +1, indicating that <span class="math notranslate nohighlight">\(\cal B\)</span> becomes
asymptotically aligned with <span class="math notranslate nohighlight">\(\cal R\)</span> as desired.</p>
<img alt="../_images/scenarioAttitudeGuidance10.svg" class="align-center" src="../_images/scenarioAttitudeGuidance10.svg" />
<img alt="../_images/scenarioAttitudeGuidance20.svg" class="align-center" src="../_images/scenarioAttitudeGuidance20.svg" />
<img alt="../_images/scenarioAttitudeGuidance40.svg" class="align-center" src="../_images/scenarioAttitudeGuidance40.svg" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useAltBodyFrame</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Here the control should not align the principal body frame <em>B</em> with <em>R</em>, but rather an alternate,
corrected body frame <span class="math notranslate nohighlight">\({\cal B}_c\)</span>.  For example, consider the Earth observing sensors
to be mounted pointing in the
positive <span class="math notranslate nohighlight">\(\hat b_1\)</span> direction. In earlier scenario this sensor platform is actually pointing away from
the Earth.  Thus, we define the corrected body frame orientation as a 180 deg rotation about
<span class="math notranslate nohighlight">\(\hat b_2\)</span>.  This flips the orientation of the final first and third body axis.  This is achieved
through:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attError</span><span class="o">.</span><span class="n">sigma_R0R</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>The DCM <span class="math notranslate nohighlight">\([R_0R]\)</span> is the same as the body to corrected body DCM <span class="math notranslate nohighlight">\([B_cB]\)</span>.
The resulting attitude and control torque histories are shown below.  Note that the projections
of the 2nd body frame axis onto the 2nd Hill frame axes converges to +1, while the other
projections converge to -1.  This indicates that the desired asymptotic Earth observing attitude
is achieved.</p>
<img alt="../_images/scenarioAttitudeGuidance11.svg" class="align-center" src="../_images/scenarioAttitudeGuidance11.svg" />
<img alt="../_images/scenarioAttitudeGuidance21.svg" class="align-center" src="../_images/scenarioAttitudeGuidance21.svg" />
<img alt="../_images/scenarioAttitudeGuidance41.svg" class="align-center" src="../_images/scenarioAttitudeGuidance41.svg" />
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeGuidance.plot_attitude_error">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeGuidance.</span></span><span class="sig-name descname"><span class="pre">plot_attitude_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeLineSet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataSigmaBR</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeGuidance.html#plot_attitude_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeGuidance.plot_attitude_error" title="Link to this definition"></a></dt>
<dd><p>Plot the attitude result.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeGuidance.plot_control_torque">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeGuidance.</span></span><span class="sig-name descname"><span class="pre">plot_control_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeLineSet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataLr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeGuidance.html#plot_control_torque"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeGuidance.plot_control_torque" title="Link to this definition"></a></dt>
<dd><p>Plot the control torque response.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeGuidance.plot_orientation">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeGuidance.</span></span><span class="sig-name descname"><span class="pre">plot_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeLineSet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataPos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataVel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataSigmaBN</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeGuidance.html#plot_orientation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeGuidance.plot_orientation" title="Link to this definition"></a></dt>
<dd><p>Plot the spacecraft orientation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeGuidance.plot_rate_error">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeGuidance.</span></span><span class="sig-name descname"><span class="pre">plot_rate_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeLineSet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataOmegaBR</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeGuidance.html#plot_rate_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeGuidance.plot_rate_error" title="Link to this definition"></a></dt>
<dd><p>Plot the body angular velocity tracking error.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeGuidance.run">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeGuidance.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useAltBodyFrame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeGuidance.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeGuidance.run" title="Link to this definition"></a></dt>
<dd><p>The scenarios can be run with the followings setups parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_plots</strong> (<em>bool</em>) – Determines if the script should display plots</p></li>
<li><p><strong>useAltBodyFrame</strong> (<em>bool</em>) – Specify if the alternate body frame should be aligned with Hill frame.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scenarioOrbitManeuverTH.html" class="btn btn-neutral float-left" title="scenarioOrbitManeuverTH" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scenarioAttGuideHyperbolic.html" class="btn btn-neutral float-right" title="scenarioAttGuideHyperbolic" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>