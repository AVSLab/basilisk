

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scenarioAttitudeSteering &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=3cd7d658"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scenarioSmallBodyFeedbackControl" href="scenarioSmallBodyFeedbackControl.html" />
    <link rel="prev" title="scenarioSepMomentumManagement" href="scenarioSepMomentumManagement.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../index.html" class="icon icon-home">
            Basilisk
              <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#attitude-simulations">Attitude Simulations</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-regulation-control">Attitude Regulation Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-guidance">Attitude Guidance</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-control-with-actuators">Attitude Control with Actuators</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#attitude-steering-control">Attitude Steering Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#monte-carlo-simulations">Monte Carlo Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active">scenarioAttitudeSteering</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/scenarioAttitudeSteering.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenarioattitudesteering">
<span id="id1"></span><h1>scenarioAttitudeSteering<a class="headerlink" href="#scenarioattitudesteering" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<span id="module-scenarioAttitudeSteering"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Demonstrates how to use the <a class="reference internal" href="../Documentation/fswAlgorithms/attControl/mrpSteering/mrpSteering.html#mrpsteering"><span class="std std-ref">Module: mrpSteering</span></a> module to stabilize the attiude relative to the Hill Frame.
Details on the math of this module can be found in this <a class="reference external" href="http://doi.org/10.1016/j.actaastro.2018.03.022">paper</a>.
This script sets up a spacecraft with 3 RWs which is orbiting the Earth.  The goal is to
illustrate how to use the <a class="reference internal" href="../Documentation/fswAlgorithms/attControl/mrpSteering/mrpSteering.html#mrpsteering"><span class="std std-ref">Module: mrpSteering</span></a> module with a rate sub-servo system to control
the attitude.</p>
<p>The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenarioAttitudeSteering</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The simulation layout is shown in the following illustration.  A single simulation process is created
which contains both the spacecraft simulation modules, as well as the Flight Software (FSW) algorithm
modules.</p>
<img alt="../_images/test_scenarioAttitudeSteering.svg" class="align-center" src="../_images/test_scenarioAttitudeSteering.svg" />
<p>The spacecraft is equipped with three RW, just as in the
<a class="reference internal" href="scenarioAttitudeFeedbackRW.html#scenarioattitudefeedbackrw"><span class="std std-ref">scenarioAttitudeFeedbackRW</span></a> tutorial.  The <a class="reference internal" href="../Documentation/fswAlgorithms/attGuidance/hillPoint/hillPoint.html#hillpoint"><span class="std std-ref">Module: hillPoint</span></a> guidance module is
used to align the body frame <span class="math notranslate nohighlight">\(\cal B\)</span> to the Hill frame <span class="math notranslate nohighlight">\(\cal H\)</span>.
The <a class="reference internal" href="../Documentation/fswAlgorithms/attControl/rateServoFullNonlinear/rateServoFullNonlinear.html#rateservofullnonlinear"><span class="std std-ref">Module: rateServoFullNonlinear</span></a> module is
used to create the rate tracking sub-servo system.  How to setup the Hill frame
guidance module is discussed in
<a class="reference internal" href="scenarioAttitudeGuidance.html#scenarioattitudeguidance"><span class="std std-ref">scenarioAttitudeGuidance</span></a>.</p>
<p>When the simulation completes several plots are shown for the MRP attitude history, the rate
tracking errors, as well as the RW motor torque components, as well as the RW wheel speeds.</p>
</section>
<section id="illustration-of-simulation-results">
<h2>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<p>The following images illustrate the expected simulation run returns for a range of script configurations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">simCase</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Here an unknown external torque
is applied, but the integral feedback term is included as well.
Note that in the RW motor torque plot both the required control torque <span class="math notranslate nohighlight">\(\hat u_B\)</span> and the true
motor torque <span class="math notranslate nohighlight">\(u_B\)</span> are shown.  This illustrates that with this maneuver the RW devices are being
saturated, and the attitude still eventually stabilizes.</p>
<img alt="../_images/scenarioAttitudeSteeringSigmaBR0.svg" class="align-center" src="../_images/scenarioAttitudeSteeringSigmaBR0.svg" />
<img alt="../_images/scenarioAttitudeSteeringomegaBR0.svg" class="align-center" src="../_images/scenarioAttitudeSteeringomegaBR0.svg" />
<img alt="../_images/scenarioAttitudeSteeringrwUs0.svg" class="align-center" src="../_images/scenarioAttitudeSteeringrwUs0.svg" />
<img alt="../_images/scenarioAttitudeSteeringOmega0.svg" class="align-center" src="../_images/scenarioAttitudeSteeringOmega0.svg" />
<p>In this simulation setup the integral feedback term is included, and the unknown external torque
is automatically compensated for to yield exponential convergence.  This convergence is despite having to track
a time-varying Hill frame on an elliptic orbit.  This illustrates that all the orbital motion is propoerly
feed-forward compensated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">simCase</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<img alt="../_images/scenarioAttitudeSteeringSigmaBR1.svg" class="align-center" src="../_images/scenarioAttitudeSteeringSigmaBR1.svg" />
<img alt="../_images/scenarioAttitudeSteeringomegaBR1.svg" class="align-center" src="../_images/scenarioAttitudeSteeringomegaBR1.svg" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">simCase</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>This setup investigates the small depature motion stability about the Hill frame.  Here only small initial
attitude and rate errors are introduced.  However, the outer loop feedback gain <span class="math notranslate nohighlight">\(K_1\)</span> is increased such that
it violates the sub-servo loop separation principle.</p>
<img alt="../_images/scenarioAttitudeSteeringSigmaBR2.svg" class="align-center" src="../_images/scenarioAttitudeSteeringSigmaBR2.svg" />
<img alt="../_images/scenarioAttitudeSteeringomegaBR2.svg" class="align-center" src="../_images/scenarioAttitudeSteeringomegaBR2.svg" />
<p>Here the local motion is now unstable, as predicted in this
<a class="reference external" href="http://hanspeterschaub.info/Papers/SchaubIAC2017.pdf">conference paper</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">simCase</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>This setup also investigates the small departure motion stability about the Hill frame.  However, in this case
the feedword term <span class="math notranslate nohighlight">\(\omega'_{\cal B^\ast/R}\)</span> is omitted, which is predicted to yield locally stabilizing control
similar in performance to a standard proportional-derivative or PD feedback control.</p>
<img alt="../_images/scenarioAttitudeSteeringSigmaBR3.svg" class="align-center" src="../_images/scenarioAttitudeSteeringSigmaBR3.svg" />
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.plot_attitude_error">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">plot_attitude_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataSigmaBR</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#plot_attitude_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.plot_attitude_error" title="Link to this definition"></a></dt>
<dd><p>Plot the attitude error.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.plot_rate_error">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">plot_rate_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataOmegaBR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataOmegaBRAst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#plot_rate_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.plot_rate_error" title="Link to this definition"></a></dt>
<dd><p>Plot the body angular velocity tracking errors</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.plot_rw_cmd_torque">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">plot_rw_cmd_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataUsReq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numRW</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#plot_rw_cmd_torque"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.plot_rw_cmd_torque" title="Link to this definition"></a></dt>
<dd><p>plot the commanded RW torque.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.plot_rw_motor_torque">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">plot_rw_motor_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataRW</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numRW</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#plot_rw_motor_torque"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.plot_rw_motor_torque" title="Link to this definition"></a></dt>
<dd><p>Plot the actual RW motor torque.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.plot_rw_speeds">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">plot_rw_speeds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataOmegaRW</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numRW</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#plot_rw_speeds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.plot_rw_speeds" title="Link to this definition"></a></dt>
<dd><p>Plot the RW speeds.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeSteering.run">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeSteering.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simCase</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeSteering.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeSteering.run" title="Link to this definition"></a></dt>
<dd><p>At the end of the python script you can specify the following example parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_plots</strong> (<em>bool</em>) – Determines if the script should display plots</p></li>
<li><p><strong>simCase</strong> (<em>int</em>) – <table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>simCase</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Detumble with balanced gains (for inner- and outer-loop
separation principle), including integral feedback</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Detumble with balanced gains (for inner- and outer-loop
separation principle), without integral feedback</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Small detumble with strong steering gain violating
separation principle, with <span class="math notranslate nohighlight">\(\omega'_{\cal B^{\ast}/R}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Small detumble with strong steering gain violating separation
principle, without <span class="math notranslate nohighlight">\(\omega'_{\cal B^{\ast}/R}\)</span></p></td>
</tr>
</tbody>
</table>
<p>The first case has a scenario that should exponentially converge to zero,
while the 2nd case will only provide a bounded
(or Lagrange stable) response.  The latter two scenarios illustrate the
performance if the outer loop feedback gain
is too strong, violating the sub-servo separation principle, and how
removing a particular term in case 3 can still
lead to a locally stable response.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scenarioSepMomentumManagement.html" class="btn btn-neutral float-left" title="scenarioSepMomentumManagement" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scenarioSmallBodyFeedbackControl.html" class="btn btn-neutral float-right" title="scenarioSmallBodyFeedbackControl" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>