

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scenarioAttitudeFeedback &mdash; Basilisk 2.8.3
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=57a44e8a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5e07a493"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=3cd7d658"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scenarioAttitudeFeedback2T" href="scenarioAttitudeFeedback2T.html" />
    <link rel="prev" title="scenarioHaloOrbit" href="scenarioHaloOrbit.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >

          
          
          <a href="../index.html" class="icon icon-home">
            Basilisk
              <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Learn.html">Learning Basilisk</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Learn/bskPrinciples.html">Fundamentals of Basilisk Simulations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Integrated Example Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#orbital-simulations">Orbital Simulations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#attitude-simulations">Attitude Simulations</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html#attitude-regulation-control">Attitude Regulation Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-guidance">Attitude Guidance</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-control-with-actuators">Attitude Control with Actuators</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#attitude-steering-control">Attitude Steering Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#orbit-control">Orbit Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#planetary-environments">Planetary Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sensors">Spacecraft Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-sub-systems">Spacecraft Sub-Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-body-dynamics-simulations-with-mujoco">Multi-Body Dynamics Simulations with MuJoCo</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-spacecraft-dynamics-simulations">Complex Spacecraft Dynamics Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#mission-simulations">Mission Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#spacecraft-formation-flying">Spacecraft Formation Flying</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#small-body-navigation-simulations">Small Body Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bsksim-architecture"><code class="docutils literal notranslate"><span class="pre">bskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multisatbsksim-architecture"><code class="docutils literal notranslate"><span class="pre">MultiSatBskSim()</span></code> Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#optical-navigation-simulations">Optical Navigation Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#monte-carlo-simulations">Monte Carlo Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-simulation-options">Advanced Simulation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#multi-threading-basilisk-simulations">Multi-Threading Basilisk Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#advanced-visualizations">Advanced Visualizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Learn/makingModules.html">Basics of Writing Basilisk Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supportData.html">Support Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExternalSites.html">External Sites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #CFB87C" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Learn.html">Learning Basilisk</a></li>
          <li class="breadcrumb-item"><a href="index.html">Integrated Example Scripts</a></li>
      <li class="breadcrumb-item active">scenarioAttitudeFeedback</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/scenarioAttitudeFeedback.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenarioattitudefeedback">
<span id="id1"></span><h1>scenarioAttitudeFeedback<a class="headerlink" href="#scenarioattitudefeedback" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/As68r55iGY0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Demonstrates how to stabilize the tumble of a spacecraft orbiting the
Earth that is initially tumbling.
This script sets up a 6-DOF spacecraft which is orbiting the Earth.</p>
<p>The script is found in the folder <code class="docutils literal notranslate"><span class="pre">basilisk/examples</span></code> and executed by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">scenarioAttitudeFeedback</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The simulation layout is
shown in the following illustration.  A single simulation process is created
which contains both the spacecraft simulation modules, as well as the Flight Software (FSW) algorithm
modules.</p>
<img alt="../_images/test_scenarioAttitudeFeedback.svg" class="align-center" src="../_images/test_scenarioAttitudeFeedback.svg" />
<p>The dynamics simulation is setup using a <a class="reference internal" href="../Documentation/simulation/dynamics/spacecraft/spacecraft.html#spacecraft"><span class="std std-ref">Module: spacecraft</span></a> module to which a gravity
effector is attached.  Note that both the rotational and translational degrees of
freedom of the spacecraft hub are turned on here to get a 6-DOF simulation.  For more
information on how to setup orbit, see <a class="reference internal" href="scenarioBasicOrbit.html#scenariobasicorbit"><span class="std std-ref">scenarioBasicOrbit</span></a>.</p>
<p>The control torque is simulated using the <a class="reference internal" href="../Documentation/simulation/dynamics/extForceTorque/extForceTorque.html#extforcetorque"><span class="std std-ref">Module: extForceTorque</span></a> module.  This module can
accept a torque in body frame components either through an input message, or through
a module internal torque vector which can be set in python.  In this simulation, the
flight software is providing the attitude control torque message which is connected to
the torque input message of this module.  If an external torque is being simulated,
then the module internal torque vector is set to a constant value.</p>
<p>The flight software algorithm module require a navigation message with the
spacecraft orientation and attitude rates.  This is setup using the <a class="reference internal" href="../Documentation/simulation/navigation/simpleNav/simpleNav.html#simplenav"><span class="std std-ref">Module: simpleNav</span></a>
module. By just invoking a sensor module it is setup to run without any simulated
corruptions.  Thus in this simulation it will return truth measurements.</p>
<p>Next the flight software algorithms need to be setup.  The inertial pointing reference
frame definition is provided through the simple <a class="reference internal" href="../Documentation/fswAlgorithms/attGuidance/inertial3D/inertial3D.html#inertial3d"><span class="std std-ref">Module: inertial3D</span></a> module.  The only input
it requires is the desired inertial heading.</p>
<p>The reference frame states and the navigation message (output of <a class="reference internal" href="../Documentation/simulation/navigation/simpleNav/simpleNav.html#simplenav"><span class="std std-ref">Module: simpleNav</span></a> are fed
into the <a class="reference internal" href="../Documentation/fswAlgorithms/attGuidance/attTrackingError/attTrackingError.html#atttrackingerror"><span class="std std-ref">Module: attTrackingError</span></a> module.  It is setup to compute the attitude tracking error
between the body frame <span class="math notranslate nohighlight">\(\cal B\)</span> and the reference frame <span class="math notranslate nohighlight">\(\cal R\)</span>.
If a body fixed frame other than <span class="math notranslate nohighlight">\(\cal B\)</span>
needs to be driven towards <em>R</em>, this could be configured as well in this module.</p>
<p>Finally the tracking errors are fed to the classic MRP feedback control module.  The
algorithm of this is discussed in the text book
<a class="reference external" href="http://dx.doi.org/10.2514/4.105210">Analytical Mechanics of Space Systems</a>.
The control torque output vector message of this
module is connected back to the input message of the <a class="reference internal" href="../Documentation/simulation/dynamics/extForceTorque/extForceTorque.html#extforcetorque"><span class="std std-ref">Module: extForceTorque</span></a> module to close
the control loop.</p>
<p>While the nominal simulation has set <code class="docutils literal notranslate"><span class="pre">useCMsg</span></code> flag to False, with it set to <code class="docutils literal notranslate"><span class="pre">True</span></code> it illustrates two things.
First it shows how to create a C-wrapped C-message in Python and write to it.  This is done with the
<code class="docutils literal notranslate"><span class="pre">VehicleConfigMsg</span></code> message.  Second, it illustrates how instead of writing to a module internal
output message (see <code class="docutils literal notranslate"><span class="pre">mrpControl.cmdTorqueOutMsg</span></code>) we can re-direct the module to write to a
stand-alone message <code class="docutils literal notranslate"><span class="pre">cmdTorqueMsg</span></code> instead.  This is useful if we need to have multiple module be writing
to a single output message such as if several flight software stacks are being setup.</p>
<p>When the simulation completes 3 plots are shown for the MRP attitude history, the rate
tracking errors, as well as the control torque vector.</p>
</section>
<section id="illustration-of-simulation-results">
<h2>Illustration of Simulation Results<a class="headerlink" href="#illustration-of-simulation-results" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useUnmodeledTorque</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useIntGain</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useKnownTorque</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useCMsg</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<img alt="../_images/scenarioAttitudeFeedback1000.svg" class="align-center" src="../_images/scenarioAttitudeFeedback1000.svg" />
<img alt="../_images/scenarioAttitudeFeedback2000.svg" class="align-center" src="../_images/scenarioAttitudeFeedback2000.svg" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useUnmodeledTorque</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useIntGain</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useKnownTorque</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useCMsg</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Note that, as expected,
the orientation error doesn’t settle to zero, but rather converges to a non-zero offset
proportional to the un-modeled torque being simulated.  Also, the control torques settle on
non-zero steady-state values.</p>
<img alt="../_images/scenarioAttitudeFeedback1100.svg" class="align-center" src="../_images/scenarioAttitudeFeedback1100.svg" />
<img alt="../_images/scenarioAttitudeFeedback2100.svg" class="align-center" src="../_images/scenarioAttitudeFeedback2100.svg" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useUnmodeledTorque</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useIntGain</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useKnownTorque</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useCMsg</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>In this case the orientation error does settle to zero.  The integral term changes the control torque
to settle on a value that matches the un-modeled external torque.</p>
<img alt="../_images/scenarioAttitudeFeedback1110.svg" class="align-center" src="../_images/scenarioAttitudeFeedback1110.svg" />
<img alt="../_images/scenarioAttitudeFeedback2110.svg" class="align-center" src="../_images/scenarioAttitudeFeedback2110.svg" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show_plots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useUnmodeledTorque</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useIntGain</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">useKnownTorque</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">useCMsg</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>In this case the orientation error does settle to zero as the feed-forward term compensates for
the external torque.  The control torque is now caused
to settle on a value that matches the un-modeled external torque.</p>
<img alt="../_images/scenarioAttitudeFeedback1101.svg" class="align-center" src="../_images/scenarioAttitudeFeedback1101.svg" />
<img alt="../_images/scenarioAttitudeFeedback2101.svg" class="align-center" src="../_images/scenarioAttitudeFeedback2101.svg" />
</section>
<dl class="py function">
<dt class="sig sig-object py" id="scenarioAttitudeFeedback.run">
<span class="sig-prename descclassname"><span class="pre">scenarioAttitudeFeedback.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useUnmodeledTorque</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIntGain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useKnownTorque</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useCMsg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scenarioAttitudeFeedback.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scenarioAttitudeFeedback.run" title="Link to this definition"></a></dt>
<dd><p>The scenarios can be run with the followings setups parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_plots</strong> (<em>bool</em>) – Determines if the script should display plots</p></li>
<li><p><strong>useUnmodeledTorque</strong> (<em>bool</em>) – Specify if an external torque should be included</p></li>
<li><p><strong>useIntGain</strong> (<em>bool</em>) – Specify if the feedback control uses an integral feedback term</p></li>
<li><p><strong>useKnownTorque</strong> (<em>bool</em>) – Specify if the external torque is feed forward in the control</p></li>
<li><p><strong>useCMsg</strong> (<em>bool</em>) – Specify if the C-based stand-alone messages should be used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scenarioHaloOrbit.html" class="btn btn-neutral float-left" title="scenarioHaloOrbit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scenarioAttitudeFeedback2T.html" class="btn btn-neutral float-right" title="scenarioAttitudeFeedback2T" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autonomous Vehicle Systems (AVS) Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>